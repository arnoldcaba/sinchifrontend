(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c93501ec"],{"1c65":function(t,e,s){},"9bbf":function(t,e,s){"use strict";var a=s("1c65"),i=s.n(a);i.a},d9e3:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-container",{attrs:{fluid:""}},[s("v-flex",[s("div",{staticStyle:{"padding-bottom":"5px"}},[s("v-textarea",{attrs:{filled:"",name:"input-7-4",label:"Necesidad",readonly:""},model:{value:t.descripcionnecesidad,callback:function(e){t.descripcionnecesidad=e},expression:"descripcionnecesidad"}})],1),s("v-card",[s("v-card-title",{staticClass:"justify-center"},[t._v("\n\t\t\t\t\tUNSPSC - NECESIDADES\n\t\t\t\t")]),s("v-card-text",[s("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),s("v-layout",{staticStyle:{"padding-top":"16px"},attrs:{column:""}},[s("v-data-table",{attrs:{headers:t.headers,items:t.data,"items-per-page":5,"disable-sort":!0,search:t.search},scopedSlots:t._u([{key:"item.tipomod",fn:function(e){var a=e.item;return[s("span",{class:[{ColorVBTrue:"N"===a.tipomod},{ColorVBFalse:"E"==a.tipomod},{ColorVBModifica:"M"==a.tipomod}]},[t._v("\n\t\t\t\t\t\t\t\t"+t._s("N"==a.tipomod?"NUEVO":"M"==a.tipomod?"MODIFICADO":"E"==a.tipomod?"ELIMINADO":"")+"\n\t\t\t\t\t\t\t")])]}}])})],1)],1)],1)],1)},i=[],o=(s("c032"),s("ef00")),n={name:"Unspsc",props:["planadquisicion","necesidad","descripcionnecesidad","enviovobo"],data:function(){return{modulo:"UNSPSC NECESIDADES",loading:!1,dialog:!1,edit:-1,dialog_del:!1,processing:!1,formTitle:"",valid:!1,search:"",unspsctxt:"0",unspsctxtant:"0",unspsc:0,itemactual:"",data:[],arrUnspsc:[],headers:[{text:"Código",align:"left",sortable:!1,value:"unspsc",class:"subtitle-1 font-weight-bold black--text"},{text:"UNSPSC",align:"left",sortable:!1,value:"unspsctxt",class:"subtitle-1 font-weight-bold black--text"},{text:"Tipo de modificación",value:"tipomod",sortable:!1,class:"subtitle-1 font-weight-bold black--text"}],filtro:"",valfiltro:"",searchfiltro:"",arrfiltro:[{text:"Código",value:"C"},{text:"Clase",value:"L"},{text:"Familia",value:"F"},{text:"Segmento",value:"S"},{text:"UNSPSC",value:"U"}],headersbusqueda:[{text:"Código",align:"left",sortable:!1,value:"codigo",class:"subtitle-1 font-weight-bold black--text"},{text:"UNSPSC",align:"left",sortable:!1,value:"nombre",class:"subtitle-1 font-weight-bold black--text"},{text:"Seleccionar",value:"action",sortable:!1,class:"subtitle-1 font-weight-bold black--text"}],dataBusq:[],headersseleccionados:[{text:"Código",align:"left",sortable:!1,value:"codigo",class:"subtitle-1 font-weight-bold black--text"},{text:"Unspsc",align:"left",sortable:!1,value:"nombre",class:"subtitle-1 font-weight-bold black--text"},{text:"Accion",align:"left",sortable:!1,value:"action",class:"subtitle-1 font-weight-bold black--text"}],dataseleccionados:[],rules:{required:function(t){return!!t||"Campo requerido."}}}},filters:{},methods:{showMessage:function(t,e,s,a){this.$root.$emit("showSnack",{snack:t,time:e,color:s,text:a})},resetForm:function(){this.unspsctxt="",this.unspsctxtant="",this.unspsc=0,this.filtro="",this.valfiltro="",this.searchfiltro="",this.dataBusq=[],this.dataseleccionados=[]},cerrarDialogo:function(){this.resetForm(),this.dialog=!1,this.edit=-1},traerData:function(){var t=this,e=this.$store.getters.getArrPlanAdqNecUnspsc,s=e.filter((function(e){return e.necesidad==t.necesidad}));this.data=s},traerUnspsc:function(){var t=this;this.arrUnspsc=[],o["a"].getUnspsc().then((function(e){e.request&&e.data&&(t.arrUnspsc=e.data.data)})).catch((function(t){}))},traerDataXFiltro:function(){var t=this;if(this.dataBusq=[],""!=this.filtro&&""!=this.valfiltro){var e=[{tipo:this.filtro,valor:this.valfiltro}];o["a"].getDataXFiltro(e).then((function(e){e.request&&e.data&&(t.dataBusq=e.data.data)})).catch((function(t){}))}else this.showMessage(!0,4e3,"error","Debe ingresar los datos de la búsqueda")},closeDialogoDel:function(){this.dialog_del=!1},deleteItem:function(t){for(var e=0;e<this.$store.getters.getArrPlanAdqNecUnspsc.length;e++){var s=this.$store.getters.getArrPlanAdqNecUnspsc[e];if(s.unspsc==t.unspsc&&s.necesidad==this.necesidad){"N"==s.tipomod?this.$store.commit("DelArrPlanAdqNecUnspsc",e):"E"!=s.tipomod?(t.tipomod="E",this.$store.commit("ModArrPlanAdqNecUnspsc",t)):"E"==s.tipomod&&(t.tipomod="",this.$store.commit("ModArrPlanAdqNecUnspsc",t));break}}this.traerData()},saveitem:function(){if(this.dataseleccionados.length<=0)this.showMessage(!0,3e3,"error","No ha seleccionado ningún Código");else{for(var t=0;t<this.dataseleccionados.length;t++){var e=this.dataseleccionados[t];this.$store.commit("AddArrPlanAdqNecUnspsc",{planadquisicion:this.planadquisicion,necesidad:this.necesidad,unspsc:e.codigo,unspsctxt:e.nombre,tipomod:"N"})}this.traerData(),this.dialog=!1}},seleccionarItem:function(t){for(var e=0;e<this.dataseleccionados.length;e++){var s=this.dataseleccionados[e];if(t.codigo==s.codigo)return void this.showMessage(!0,4e3,"error","El Código Unspsc ya fué seleccionado")}for(var a=0;a<this.data.length;a++){var i=this.data[a];if(t.codigo==i.unspsc)return void this.showMessage(!0,4e3,"error","El Código Unspsc ya existe")}this.dataseleccionados.push({planadquisicion:this.planadquisicion,necesidad:this.necesidad,codigo:t.codigo,nombre:t.nombre})},eliminarItem:function(t){for(var e=0;e<this.dataseleccionados.length;e++){var s=this.dataseleccionados[e];if(t.codigo==s.codigo)return void this.dataseleccionados.splice(e,1)}},agregaBitacora:function(t,e){var s={modulo:this.modulo,accion:t,detalle:e};this.$root.$emit("agregaBitacora",s)}},watch:{edit:function(t){t?(this.formTitle="Editar",this.unspsc=this.itemactual.unspsc):(this.resetForm(),this.formTitle="Nuevo")},planadquisicion:function(t){0!=t&&this.traerData()},necesidad:function(t){0!=t&&this.traerData()}},mounted:function(){this.traerData(),this.traerUnspsc()}},c=n,r=(s("9bbf"),s("2877")),l=Object(r["a"])(c,a,i,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=chunk-c93501ec.726d8144.js.map