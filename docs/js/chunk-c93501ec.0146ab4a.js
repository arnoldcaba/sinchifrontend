(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c93501ec"],{"1c65":function(t,e,a){},"9bbf":function(t,e,a){"use strict";var s=a("1c65"),i=a.n(s);i.a},d9e3:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-flex",[a("div",{staticStyle:{"padding-bottom":"5px"}},[a("v-textarea",{attrs:{filled:"",name:"input-7-4",label:"Necesidad",readonly:""},model:{value:t.descripcionnecesidad,callback:function(e){t.descripcionnecesidad=e},expression:"descripcionnecesidad"}})],1),a("v-card",[a("v-card-title",{staticClass:"justify-center"},[t._v("\n\t\t\t\t\tUNSPSC - NECESIDADES\n\t\t\t\t")]),a("v-card-text",[a("v-text-field",{attrs:{"append-icon":"search",label:"Buscar","single-line":"","hide-details":""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),a("v-layout",{staticStyle:{"padding-top":"16px"},attrs:{column:""}},[a("v-data-table",{attrs:{headers:t.headers,items:t.data,"items-per-page":5,"disable-sort":!0,search:t.search},scopedSlots:t._u([{key:"item.tipomod",fn:function(e){var s=e.item;return[a("span",{class:[{ColorVBTrue:"N"===s.tipomod},{ColorVBFalse:"E"==s.tipomod},{ColorVBModifica:"M"==s.tipomod}]},[t._v("\n\t\t\t\t\t\t\t\t"+t._s("N"==s.tipomod?"NUEVO":"M"==s.tipomod?"MODIFICADO":"E"==s.tipomod?"ELIMINADO":"")+"\n\t\t\t\t\t\t\t")])]}}])})],1)],1)],1)],1)},i=[],o=(a("c032"),a("ef00")),n={name:"Unspsc",props:["planadquisicion","necesidad","descripcionnecesidad","enviovobo"],data:function(){return{modulo:"UNSPSC NECESIDADES",loading:!1,dialog:!1,edit:-1,dialog_del:!1,processing:!1,formTitle:"",valid:!1,search:"",unspsctxt:"0",unspsctxtant:"0",unspsc:0,itemactual:"",data:[],arrUnspsc:[],headers:[{text:"Código",align:"left",sortable:!1,value:"unspsc"},{text:"Unspsc",align:"left",sortable:!1,value:"unspsctxt"},{text:"Tipo Mod.",value:"tipomod",sortable:!1}],filtro:"",valfiltro:"",searchfiltro:"",arrfiltro:[{text:"Código",value:"C"},{text:"Clase",value:"L"},{text:"Familia",value:"F"},{text:"Segmento",value:"S"},{text:"Unspsc",value:"U"}],headersbusqueda:[{text:"Código",align:"left",sortable:!1,value:"codigo"},{text:"Unspsc",align:"left",sortable:!1,value:"nombre"},{text:"Seleccionar",value:"action",sortable:!1}],dataBusq:[],headersseleccionados:[{text:"Código",align:"left",sortable:!1,value:"codigo"},{text:"Unspsc",align:"left",sortable:!1,value:"nombre"},{text:"Accion",align:"left",sortable:!1,value:"action"}],dataseleccionados:[],rules:{required:function(t){return!!t||"Campo requerido."}}}},filters:{},methods:{showMessage:function(t,e,a,s){this.$root.$emit("showSnack",{snack:t,time:e,color:a,text:s})},resetForm:function(){this.unspsctxt="",this.unspsctxtant="",this.unspsc=0,this.filtro="",this.valfiltro="",this.searchfiltro="",this.dataBusq=[],this.dataseleccionados=[]},cerrarDialogo:function(){this.resetForm(),this.dialog=!1,this.edit=-1},traerData:function(){var t=this,e=this.$store.getters.getArrPlanAdqNecUnspsc,a=e.filter((function(e){return e.necesidad==t.necesidad}));this.data=a},traerUnspsc:function(){var t=this;this.arrUnspsc=[],o["a"].getUnspsc().then((function(e){e.request&&e.data&&(t.arrUnspsc=e.data.data)})).catch((function(t){}))},traerDataXFiltro:function(){var t=this;if(this.dataBusq=[],""!=this.filtro&&""!=this.valfiltro){var e=[{tipo:this.filtro,valor:this.valfiltro}];o["a"].getDataXFiltro(e).then((function(e){e.request&&e.data&&(t.dataBusq=e.data.data)})).catch((function(t){}))}else this.showMessage(!0,4e3,"error","Debe ingresar los datos de la búsqueda")},closeDialogoDel:function(){this.dialog_del=!1},deleteItem:function(t){for(var e=0;e<this.$store.getters.getArrPlanAdqNecUnspsc.length;e++){var a=this.$store.getters.getArrPlanAdqNecUnspsc[e];if(a.unspsc==t.unspsc&&a.necesidad==this.necesidad){"N"==a.tipomod?this.$store.commit("DelArrPlanAdqNecUnspsc",e):"E"!=a.tipomod?(t.tipomod="E",this.$store.commit("ModArrPlanAdqNecUnspsc",t)):"E"==a.tipomod&&(t.tipomod="",this.$store.commit("ModArrPlanAdqNecUnspsc",t));break}}this.traerData()},saveitem:function(){if(this.dataseleccionados.length<=0)this.showMessage(!0,3e3,"error","No ha seleccionado ningún Código");else{for(var t=0;t<this.dataseleccionados.length;t++){var e=this.dataseleccionados[t];this.$store.commit("AddArrPlanAdqNecUnspsc",{planadquisicion:this.planadquisicion,necesidad:this.necesidad,unspsc:e.codigo,unspsctxt:e.nombre,tipomod:"N"})}this.traerData(),this.dialog=!1}},seleccionarItem:function(t){for(var e=0;e<this.dataseleccionados.length;e++){var a=this.dataseleccionados[e];if(t.codigo==a.codigo)return void this.showMessage(!0,4e3,"error","El Código Unspsc ya fué seleccionado")}for(var s=0;s<this.data.length;s++){var i=this.data[s];if(t.codigo==i.unspsc)return void this.showMessage(!0,4e3,"error","El Código Unspsc ya existe")}this.dataseleccionados.push({planadquisicion:this.planadquisicion,necesidad:this.necesidad,codigo:t.codigo,nombre:t.nombre})},eliminarItem:function(t){for(var e=0;e<this.dataseleccionados.length;e++){var a=this.dataseleccionados[e];if(t.codigo==a.codigo)return void this.dataseleccionados.splice(e,1)}},agregaBitacora:function(t,e){var a={modulo:this.modulo,accion:t,detalle:e};this.$root.$emit("agregaBitacora",a)}},watch:{edit:function(t){t?(this.formTitle="Editar",this.unspsc=this.itemactual.unspsc):(this.resetForm(),this.formTitle="Nuevo")},planadquisicion:function(t){0!=t&&this.traerData()},necesidad:function(t){0!=t&&this.traerData()}},mounted:function(){this.traerData(),this.traerUnspsc()}},r=n,c=(a("9bbf"),a("2877")),d=Object(c["a"])(r,s,i,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-c93501ec.0146ab4a.js.map