(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b273b"],{"23bf":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-container",{attrs:{fluid:""}},[o("v-stepper",{model:{value:e.e1,callback:function(t){e.e1=t},expression:"e1"}},[o("v-stepper-header",[o("v-stepper-step",{attrs:{complete:e.e1>1&&e.propiedadintelectual,step:"1"}},[e._v("Formulación")]),o("v-divider"),o("v-stepper-step",{attrs:{complete:e.e1>2,step:"2"}},[e._v("Propiedad Intelectual")])],1),o("v-stepper-items",[o("v-stepper-content",{attrs:{step:"1"}},[e._l(e.data,(function(t){return o("v-card",{key:t.codigo,staticClass:"mb-12",attrs:{"max-width":"1000"}},[o("v-card-text",[o("v-row",[e._v("\n                            "+e._s(t.codigo)+" "+e._s(t.pregunta)+"\n                        ")]),o("v-row",[o("v-col",{attrs:{sm3:""}},[o("v-select",{attrs:{items:e.arrBoolean,"item-value":"value","item-text":"text",label:"Si/No",readonly:e.readonly},on:{change:function(o){return e.pasarPropiedadIntelectual(t.codigo,t.sino)}},model:{value:t.sino,callback:function(o){e.$set(t,"sino",o)},expression:"item.sino"}})],1),o("v-col",{attrs:{sm9:""}},[o("v-textarea",{attrs:{filled:"",name:"input-5-4",readonly:e.readonly,label:"Observación"},model:{value:t.observacion,callback:function(o){e.$set(t,"observacion",o)},expression:"item.observacion"}})],1)],1)],1)],1)})),o("div",{staticStyle:{width:"100%","text-align":"right"}},[e.readonly?e._e():o("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:e.saveitem}},[e._v("Actualizar Formulación")])],1),o("v-btn",{attrs:{color:"primary",disabled:!e.propiedadintelectual},on:{click:function(t){e.e1=2}}},[e._v("\n                    Continue\n                ")])],2),o("v-stepper-content",{attrs:{step:"2"}},[o("v-card",{staticClass:"mb-12",attrs:{"max-width":"1000"}},[o("v-card-text",[o("v-row",[o("v-col",{attrs:{sm9:""}},[e._v("\n                                1. Productos Sujetos a Derechos de Autor\n                            ")]),o("v-col",{attrs:{sm3:""}},[o("v-select",{attrs:{items:e.arrBoolean,"item-value":"value","item-text":"text",label:"Si/No",readonly:e.readonly},on:{change:function(t){return e.pasarHabDeshDA()}},model:{value:e.SNderaut,callback:function(t){e.SNderaut=t},expression:"SNderaut"}})],1)],1),o("v-row",{attrs:{justify:"center"}},[o("v-data-table",{attrs:{headers:e.headDerAut,items:e.dataDerAut,"single-select":!1,"show-select":!e.readonly,"item-key":"codigo","hide-default-footer":!0,"items-per-page":-1},model:{value:e.selectedDerAut,callback:function(t){e.selectedDerAut=t},expression:"selectedDerAut"}})],1)],1)],1),o("v-card",{staticClass:"mb-12",attrs:{"max-width":"1000"}},[o("v-card-text",[o("v-row",[o("v-col",{attrs:{sm9:""}},[e._v("\n                                2. Productos Sujetos de Propiedad Industrial\n                            ")]),o("v-col",{attrs:{sm3:""}},[o("v-select",{attrs:{items:e.arrBoolean,"item-value":"value","item-text":"text",label:"Si/No",readonly:e.readonly},on:{change:function(t){return e.pasarHabDeshDPI(e.SNproind)}},model:{value:e.SNproind,callback:function(t){e.SNproind=t},expression:"SNproind"}})],1)],1),o("v-row",{attrs:{justify:"center"}},[o("v-data-table",{attrs:{headers:e.headPropInd,items:e.dataPropInd,"single-select":!1,"show-select":!e.readonly,"item-key":"codigo","hide-default-footer":!0,"items-per-page":-1},model:{value:e.selectedPropInd,callback:function(t){e.selectedPropInd=t},expression:"selectedPropInd"}})],1)],1)],1),o("v-card",{staticClass:"mb-12",attrs:{"max-width":"1000"}},[o("v-card-text",[o("v-row",[o("v-col",{attrs:{sm9:""}},[e._v("\n                                3. Obtención y mejora de organismos vivos\n                            ")]),o("v-col",{attrs:{sm3:""}},[o("v-select",{attrs:{items:e.arrBoolean,"item-value":"value","item-text":"text",label:"Si/No",readonly:e.readonly},on:{change:function(t){return e.pasarHabDeshOV(e.SNorgviv)}},model:{value:e.SNorgviv,callback:function(t){e.SNorgviv=t},expression:"SNorgviv"}})],1)],1),o("v-row",{attrs:{justify:"center"}},[o("v-data-table",{attrs:{headers:e.headOrgViv,items:e.dataOrgViv,"single-select":!1,"show-select":!e.readonly,"item-key":"codigo","hide-default-footer":!0,"items-per-page":-1},model:{value:e.selectedOrgViv,callback:function(t){e.selectedOrgViv=t},expression:"selectedOrgViv"}})],1)],1)],1),o("div",{staticStyle:{width:"100%","text-align":"right"}},[e.readonly?e._e():o("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:e.savePI}},[e._v("Actualizar Propiedad Intelectual")])],1),o("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.e1=1}}},[e._v("\n                    Anterior\n                ")]),o("v-btn",{attrs:{text:""}},[e._v("Cancel")])],1)],1)],1)],1)},r=[],n=o("a34a"),i=o.n(n),c=o("bc3a"),s=o.n(c),d=o("d89f"),l={getData:function(){return new Promise((function(e,t){s()({method:"POST",url:d["b"].apiUrl+"/ProyectosFormulacion",dataType:"json"}).then((function(t){e(t)})).catch((function(t){e(t)}))}))},getDataXProyecto:function(e){return new Promise((function(t,o){s()({method:"POST",url:d["b"].apiUrl+"/proyectoformulacionXproyecto",dataType:"json",data:{proyecto:e}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))},guardarData:function(e){return new Promise((function(t,o){s()({method:"POST",url:d["b"].apiUrl+"/guardarproyectoformulacion",dataType:"json",data:{data:e}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))},addPreguntas:function(e){return new Promise((function(t,o){s()({method:"POST",url:d["b"].apiUrl+"/addPreguntasproyectoformulacion",dataType:"json",data:{proyecto:e}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))}},u=l,p={getData:function(){return new Promise((function(e,t){s()({method:"POST",url:d["b"].apiUrl+"/ProyectosOrgVivos",dataType:"json"}).then((function(t){e(t)})).catch((function(t){e(t)}))}))},getDataXProyecto:function(e){return new Promise((function(t,o){s()({method:"POST",url:d["b"].apiUrl+"/ProyectosOrgVivosXproyecto",dataType:"json",data:{proyecto:e}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))},seleccionadosxProyecto:function(e){return new Promise((function(t,o){s()({method:"POST",url:d["b"].apiUrl+"/selProyectosOrgVivos",dataType:"json",data:{proyecto:e}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))}},h=p,v={getData:function(){return new Promise((function(e,t){s()({method:"POST",url:d["b"].apiUrl+"/ProyectosProdDerAut",dataType:"json"}).then((function(t){e(t)})).catch((function(t){e(t)}))}))},getDataXProyecto:function(e){return new Promise((function(t,o){s()({method:"POST",url:d["b"].apiUrl+"/ProyectosProdDerAutXproyecto",dataType:"json",data:{proyecto:e}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))},seleccionadosxProyecto:function(e){return new Promise((function(t,o){s()({method:"POST",url:d["b"].apiUrl+"/selProyectosProdDerAut",dataType:"json",data:{proyecto:e}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))}},f=v,g={getData:function(){return new Promise((function(e,t){s()({method:"POST",url:d["b"].apiUrl+"/ProyectosProdPropInd",dataType:"json"}).then((function(t){e(t)})).catch((function(t){e(t)}))}))},getDataXProyecto:function(e){return new Promise((function(t,o){s()({method:"POST",url:d["b"].apiUrl+"/ProyectosProdPropIndXproyecto",dataType:"json",data:{proyecto:e}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))},seleccionadosxProyecto:function(e){return new Promise((function(t,o){s()({method:"POST",url:d["b"].apiUrl+"/selProyectosProdPropInd",dataType:"json",data:{proyecto:e}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))}},P=g,m={guardarDerAut:function(e){return new Promise((function(t,o){s()({method:"POST",url:d["b"].apiUrl+"/addProyectoProdDerAut",dataType:"json",data:{data:e}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))},guardarPropInd:function(e){return new Promise((function(t,o){s()({method:"POST",url:d["b"].apiUrl+"/addProyectoProdPropInd",dataType:"json",data:{data:e}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))},guardarOrgViv:function(e){return new Promise((function(t,o){s()({method:"POST",url:d["b"].apiUrl+"/addProyectoOrgVivos",dataType:"json",data:{data:e}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))}},y=m;function b(e,t,o,a,r,n,i){try{var c=e[n](i),s=c.value}catch(d){return void o(d)}c.done?t(s):Promise.resolve(s).then(a,r)}function S(e){return function(){var t=this,o=arguments;return new Promise((function(a,r){var n=e.apply(t,o);function i(e){b(n,a,r,i,c,"next",e)}function c(e){b(n,a,r,i,c,"throw",e)}i(void 0)}))}}function O(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}var A={name:"FormulacionPI",props:["proyecto","readonly","convenioproyecto","nombreproyecto","codigocoordinador"],data:function(){return O({loading:!1,e1:1,propiedadintelectual:0,data:[],selectedDerAut:[],selectedPropInd:[],selectedOrgViv:[],SNproind:0,SNderaut:0,SNorgviv:0,dataOrgViv:[],arrBoolean:[{value:0,text:"NO"},{value:1,text:"SI"}],headDerAut:[{text:"Descripción",align:"left",sortable:!1,value:"descripcion"}],headPropInd:[{text:"Descripción",align:"left",sortable:!1,value:"descripcion"}],headOrgViv:[{text:"Descripción",align:"left",sortable:!1,value:"descripcion"}],dataDerAut:[],dataPropInd:[]},"dataOrgViv",[])},methods:{showMessage:function(e,t,o,a){this.$root.$emit("showSnack",{snack:e,time:t,color:o,text:a})},envioNotificaciones:function(e,t,o){this.$emit("envioNotificaciones",{mensajenotificacion:e,asuntocorreo:t,mensajecorreo:o})},agregarPreguntas:function(){u.addPreguntas(this.proyecto).then((function(e){})).catch((function(e){}))},traerdata:function(){var e=this;this.loading=!0,u.getDataXProyecto(this.proyecto).then((function(t){if(t.request)if(t.data){e.data=t.data.data;for(var o=0;o<e.data.length;o++){var a=e.data[o];"3"==a.codigo&&"1"==a.sino&&(e.propiedadintelectual=1),"1"==a.sino?a.sino=1:a.sino=0}}else e.data=[];else e.data=[];e.loading=!1})).catch((function(t){e.data=[],e.loading=!1}))},pasarPropiedadIntelectual:function(e,t){3==e&&(this.propiedadintelectual=!!t)},saveitem:function(){this.loading=!0;var e=this;u.guardarData(this.data).then((function(t){if(t.response){var o=t.response.data.message;e.showMessage(!0,7e3,"error",o)}else if(t.statusText){e.showMessage(!0,3e3,"success","Se Actualizarón las Preguntas de la Formulación con éxito"),e.traerdata(),e.agregaBitacora("ACTUALIZACION","SE ACTUALIZARON LAS PREGUNTAS DE LA FORMULACION DEL PROYECTO CON # DE CONVENIO: "+e.convenioproyecto+" Y NOMBRE: "+e.nombreproyecto);var a="Cordial Saludo,<br><br> Se Actualizaron las Preguntas de la Formulación del Proyecto con # de Convenio "+e.convenioproyecto+", Nombre: "+e.nombreproyecto+"<br><br>Agradeciendo su atención,<br><br> <b>SINCHI</b><br><br> <i>Este es un servicio de notificaciones generado automáticamente por medio de correo electrónico, no lo responda.</i> <br>",r="Se Actualizaron las Preguntas de la Formulación del Proyecto con # de Convenio "+e.convenioproyecto+", Nombre: "+e.nombreproyecto;e.envioNotificaciones(r,"Actualización de las Preguntas de la Formulación del Proyecto",a)}else e.showMessage(!0,3e3,"error",t.message);e.loading=!1})).catch((function(t){e.showMessage(!0,3e3,"error",t),e.loading=!1}))},pasarHabDeshDA:function(){0==this.SNderaut&&(this.selectedDerAut=[])},pasarHabDeshOV:function(){0==this.SNorgviv&&(this.selectedOrgViv=[])},pasarHabDeshDPI:function(){0==this.SNproind&&(this.selectedOrgViv=[])},traerOrgVivosSel:function(){var e=this;this.dataOrgViv=[],this.selectedOrgViv=[],this.SNorgviv=0,h.seleccionadosxProyecto(this.proyecto).then((function(t){if(t.request&&t.data){e.dataOrgViv=t.data;for(var o=0,a=0;a<e.dataOrgViv.length;a++)"1"==e.dataOrgViv[a].Seleccionado&&(o++,e.selectedOrgViv.push({codigo:e.dataOrgViv[a].codigo,descripcion:e.dataOrgViv[a].descripcion,Seleccionado:e.dataOrgViv[a].Seleccionado}));o>0&&(e.SNorgviv=1)}})).catch((function(e){}))},traerProdDerAutSel:function(){var e=this;this.dataDerAut=[],this.selectedDerAut=[],this.SNderaut=0,f.seleccionadosxProyecto(this.proyecto).then((function(t){if(t.request&&t.data){e.dataDerAut=t.data;for(var o=0,a=0;a<e.dataDerAut.length;a++)"1"==e.dataDerAut[a].Seleccionado&&(o++,e.selectedDerAut.push({codigo:e.dataDerAut[a].codigo,descripcion:e.dataDerAut[a].descripcion,Seleccionado:e.dataDerAut[a].Seleccionado}));o>0&&(e.SNderaut=1)}})).catch((function(e){}))},traerProdProIndSel:function(){var e=this;this.dataPropInd=[],this.selectedPropInd=[],this.SNderaut=0,P.seleccionadosxProyecto(this.proyecto).then((function(t){if(t.request&&t.data){e.dataPropInd=t.data;for(var o=0,a=0;a<e.dataPropInd.length;a++)"1"==e.dataPropInd[a].Seleccionado&&(o++,e.selectedPropInd.push({codigo:e.dataPropInd[a].codigo,descripcion:e.dataPropInd[a].descripcion,Seleccionado:e.dataPropInd[a].Seleccionado}));o>0&&(e.SNproind=1)}})).catch((function(e){}))},savePI:function(){var e=S(i.a.mark((function e(){var t,o,a,r,n,c,s,d,l,u,p;return i.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(e.prev=0,this.loading=!0,t=[],o=[],a=[],r=0;r<this.selectedDerAut.length;r++)n=this.selectedDerAut[r],t.push({proyecto:this.proyecto,codigo:n.codigo});for(c=0;c<this.selectedPropInd.length;c++)s=this.selectedPropInd[c],o.push({proyecto:this.proyecto,codigo:s.codigo});for(d=0;d<this.selectedOrgViv.length;d++)l=this.selectedOrgViv[d],a.push({proyecto:this.proyecto,codigo:l.codigo});return e.next=10,y.guardarDerAut(t);case 10:return e.sent,e.next=13,y.guardarPropInd(o);case 13:return e.sent,e.next=16,y.guardarOrgViv(a);case 16:e.sent,"","",this.showMessage(!0,3e3,"success","Se Actualizó los datos de la Porpiedad Intelectual con éxito"),this.traerOrgVivosSel(),this.traerProdDerAutSel(),this.traerProdProIndSel(),this.agregaBitacora("ACTUALIZACION","SE ACTUALIZÓ LOS DATOS DE LA PROPIEDAD INTELECTUAL DEL PROYECTO CON # DE CONVENIO: "+this.convenioproyecto+" Y NOMBRE: "+this.nombreproyecto),u="Cordial Saludo,<br><br> Se Actualizó los datos de la Propiedad Intelectual del Proyecto con # de Convenio "+this.convenioproyecto+", Nombre: "+this.nombreproyecto+"<br><br>Agradeciendo su atención,<br><br> <b>SINCHI</b><br><br> <i>Este es un servicio de notificaciones generado automáticamente por medio de correo electrónico, no lo responda.</i> <br>",p="Se Actualizó los datos de la Propiedad Intelectual del Proyecto con # de Convenio "+this.convenioproyecto+", Nombre: "+this.nombreproyecto,this.envioNotificaciones(p,"Actualización de los datos de la propiedad intelectual del Proyecto",u),this.loading=!1,e.next=34;break;case 30:e.prev=30,e.t0=e["catch"](0),this.showMessage(!0,3e3,"error",e.t0),this.loading=!1;case 34:return e.prev=34,this.loading=!1,e.finish(34);case 37:case"end":return e.stop()}}),e,this,[[0,30,34,37]])})));function t(){return e.apply(this,arguments)}return t}(),agregaBitacora:function(e,t){var o={modulo:"FORMULACION/PROPIEDAD INTELECTAL PROYECTOS",accion:e,detalle:t};this.$root.$emit("agregaBitacora",o)}},watch:{proyecto:function(e){0!=e&&(this.agregarPreguntas(),this.traerdata(),this.traerOrgVivosSel(),this.traerProdDerAutSel(),this.traerProdProIndSel())},selectedOrgViv:function(e){e.length>0?this.SNorgviv=1:this.SNorgviv=0},selectedDerAut:function(e){e.length>0?this.SNderaut=1:this.SNderaut=0},selectedPropInd:function(e){e.length>0?this.SNproind=1:this.SNproind=0}}},D=A,I=o("2877"),N=Object(I["a"])(D,a,r,!1,null,null,null);t["default"]=N.exports}}]);
//# sourceMappingURL=chunk-2d0b273b.e116293f.js.map