{"version":3,"sources":["webpack:///./src/components/CProyectosCiudades.vue?f2f2","webpack:///./src/servicios/DepartamentosService.js","webpack:///src/components/CProyectosCiudades.vue","webpack:///./src/components/CProyectosCiudades.vue?1707","webpack:///./src/components/CProyectosCiudades.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","directives","name","rawName","value","readonly","expression","staticStyle","on","$event","dialogAdd","itemactual","_v","model","callback","$$v","search","data","scopedSlots","_u","key","fn","props","staticClass","_s","group","headersdata","items","ref","_l","item","nomciudad","codigoreal","loading","dialog_del","deleteItem","arrDepartamentos","traeCiudades","departamento","codigo","selected","headersciudad","arrCiudades","$set","saveitem","staticRenderFns","departamentosService","Promise","resolve","reject","axios","method","url","configService","apiUrl","dataType","then","res","catch","err","Codigo","id","component"],"mappings":"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","file":"js/chunk-2d0dae63.c19484c9.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.readonly),expression:\"!readonly\"}],staticStyle:{\"padding-bottom\":\"8px\"}},[_c('v-btn',{attrs:{\"fab\":\"\",\"dark\":\"\",\"small\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){_vm.dialogAdd = true,_vm.itemactual=''}}},[_c('v-icon',{attrs:{\"dark\":\"\"}},[_vm._v(\"add\")])],1)],1),_c('v-card',{attrs:{\"flat\":\"\",\"tile\":\"\",\"min-height\":\"500\"}},[_c('v-card-text',[_c('v-text-field',{attrs:{\"append-icon\":\"search\",\"label\":\"Buscar\",\"single-line\":\"\",\"hide-details\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}}),_c('br'),_c('v-data-table',{attrs:{\"items\":_vm.data,\"items-per-page\":5,\"group-by\":\"nombredepto\",\"show-group-by\":\"\",\"search\":_vm.search},scopedSlots:_vm._u([{key:\"group\",fn:function(props){return [_c('span',{staticClass:\"font-weight-bold\"},[_vm._v(_vm._s(props.group))]),_c('v-data-table',{attrs:{\"headers\":_vm.headersdata,\"items\":props.items,\"item-key\":\"nombredepto\",\"hide-default-footer\":\"\",\"search\":_vm.search},scopedSlots:_vm._u([{key:\"body\",fn:function(ref){\nvar items = ref.items;\nreturn [_c('tbody',_vm._l((items),function(item){return _c('tr',{key:item.nomciudad},[_c('td',{staticStyle:{\"width\":\"90%\"}},[_vm._v(_vm._s(item.nomciudad))]),_c('td',{staticStyle:{\"width\":\"10%\"}},[_c('v-icon',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.readonly && item.codigoreal != 0),expression:\"!readonly && item.codigoreal != 0\"}],staticClass:\"mr-5\",attrs:{\"small\":\"\",\"color\":\"primary\",\"disabled\":_vm.loading,\"loading\":_vm.loading},on:{\"click\":function($event){_vm.dialog_del=true,_vm.itemactual=item}}},[_vm._v(\"\\n                                            delete\\n                                        \")])],1)])}),0)]}}],null,true)})]}}])})],1)],1),_c('v-dialog',{attrs:{\"width\":\"550\"},model:{value:(_vm.dialog_del),callback:function ($$v) {_vm.dialog_del=$$v},expression:\"dialog_del\"}},[_c('v-card',[_c('v-card-title',[_c('span',{staticClass:\"headline red--text\"},[_vm._v(\"Eliminar Ciudad\")])]),_c('v-card-text',[_vm._v(\"\\t\\t\\t\\t\\t\\n                Â¿Esta seguro de eliminar la Ciudad seleccionada?.\\t\\t\\t\\t\\t\\n            \")]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"dark\":\"\",\"text\":\"\"},on:{\"click\":function($event){_vm.dialog_del=false}}},[_vm._v(\"Cancelar\")]),_c('v-btn',{attrs:{\"color\":\"red\",\"text\":\"\"},on:{\"click\":_vm.deleteItem}},[_vm._v(\"Eliminar\")])],1)],1)],1),_c('v-dialog',{attrs:{\"max-width\":\"800\",\"persistent\":\"\"},model:{value:(_vm.dialogAdd),callback:function ($$v) {_vm.dialogAdd=$$v},expression:\"dialogAdd\"}},[_c('v-card',[_c('v-card-text',[_c('v-row',{attrs:{\"dense\":\"\"}},[_c('v-col',{attrs:{\"sm12\":\"\"}},[_c('v-card',{attrs:{\"height\":\"100\"}},[_c('v-card-text',[_c('v-select',{attrs:{\"items\":_vm.arrDepartamentos,\"item-value\":\"codigo\",\"item-text\":\"descripcion\",\"label\":\"Departamento\",\"return-object\":\"\"},on:{\"change\":function($event){return _vm.traeCiudades(_vm.departamento.codigo)}},model:{value:(_vm.departamento),callback:function ($$v) {_vm.departamento=$$v},expression:\"departamento\"}})],1)],1)],1)],1),_c('v-row',[_c('v-col',{attrs:{\"sm12\":\"\"}},[_c('v-card',{attrs:{\"flat\":\"\",\"tile\":\"\",\"min-height\":\"300\"}},[_c('v-card-text',[_c('v-checkbox',{attrs:{\"readonly\":_vm.readonly,\"color\":\"primary\",\"label\":\"Seleccionar Todas las Ciudades\"},model:{value:(_vm.selected),callback:function ($$v) {_vm.selected=$$v},expression:\"selected\"}}),_c('v-data-table',{attrs:{\"headers\":_vm.headersciudad,\"items\":_vm.arrCiudades,\"items-per-page\":5},scopedSlots:_vm._u([{key:\"item.seleccionar\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('v-checkbox',{attrs:{\"readonly\":_vm.readonly,\"color\":\"primary\"},model:{value:(item.seleccionar),callback:function ($$v) {_vm.$set(item, \"seleccionar\", $$v)},expression:\"item.seleccionar\"}})]}}])})],1)],1)],1)],1)],1),_c('v-card-actions',[_c('div',{staticStyle:{\"width\":\"100%\",\"text-align\":\"right\"}},[_c('v-btn',{attrs:{\"color\":\"primary\",\"dark\":\"\",\"text\":\"\"},on:{\"click\":_vm.saveitem}},[_vm._v(\"Actualizar\")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"dark\":\"\",\"text\":\"\"},on:{\"click\":function($event){_vm.dialogAdd=false}}},[_vm._v(\"Cancelar\")])],1)])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from 'axios'\nimport configService from './config'\n\nconst departamentosService = {}\n\n  departamentosService.getData = function(){\n\n    return new Promise(function(resolve, reject) {axios({\n        method:'POST',\n        url: configService.apiUrl + '/Departamentos',\n        dataType: \"json\"\n        /*,\n        headers:authHeader*/\n      })\n      .then(function(res) {\n\n        resolve(res)      \n        \n      })\n      .catch(function(err) {     \n\n        resolve(err)\n           \n      })\n    })\n\n  }\n\n  departamentosService.guardarData = function(data){\n\n    return new Promise(function(resolve, reject) {axios({\n        method:'POST',\n        url: configService.apiUrl + '/guardarDepartamento',\n        dataType: \"json\",\n        data: {\n          data: data          \n        }\n      })\n      .then(function(res) {\n\n        resolve(res)      \n        \n      })\n      .catch(function(err) {     \n\n        resolve(err)\n           \n      })\n    })\n\n  }\n\n  departamentosService.DelData = function(Codigo){\n\n    return new Promise(function(resolve, reject) {axios({\n        method:'POST',\n        url: configService.apiUrl + '/delDepartamento',\n        dataType: \"json\",\n        data: {\n          id: Codigo          \n        }\n      })\n      .then(function(res) {\n\n        resolve(res)      \n        \n      })\n      .catch(function(err) {     \n\n        resolve(err)\n           \n      })\n    })\n\n  }\n\n  export default departamentosService","<template>\n    <v-container fluid>\n        <div style=\"padding-bottom:8px\" v-show=\"!readonly\"> \n            <v-btn fab dark small color=\"primary\" @click=\"dialogAdd = true,itemactual=''\" >\n                <v-icon dark>add</v-icon>\t\t\t\t\n            </v-btn>\n        </div>\n\n        <v-card\n            flat\n            tile\n            min-height=\"500\"\n        >\n            <v-card-text>\n                <v-text-field v-model=\"search\" append-icon=\"search\" label=\"Buscar\" single-line hide-details></v-text-field>               \n                <br>\n                <v-data-table :items=\"data\" :items-per-page=\"5\" \n                              group-by=\"nombredepto\" \n                              show-group-by \n                              :search=\"search\">                    \n                    <template v-slot:group=\"props\">\n                        <span class=\"font-weight-bold\">{{props.group  }}</span>                       \n\n                        <v-data-table\n                            :headers=\"headersdata\"\n                            :items=\"props.items\"\n                            item-key=\"nombredepto\"\n                            hide-default-footer\n                            :search=\"search\"\n                            \n                        >\n                            <template v-slot:body=\"{ items }\">                                    \n                                <tbody>\n                                    <tr v-for=\"item in items\" :key=\"item.nomciudad\">\n                                        <td style=\"width:90%\">{{ item.nomciudad }}</td>\n                                        <td style=\"width:10%\">\n                                            <v-icon\n                                                small\n                                                class=\"mr-5\"\n                                                color=\"primary\" \n                                                :disabled=\"loading\"\n                                                :loading=\"loading\"\n                                                @click=\"dialog_del=true,itemactual=item\"\n                                                v-show=\"!readonly && item.codigoreal != 0\"\n                                            >\n                                                delete\n                                            </v-icon>\n                                        </td>\n                                    </tr>\n                                </tbody>\n                            </template>\n                        </v-data-table>\n                    </template>\n                                     \n                </v-data-table>\n            </v-card-text>\n\n        </v-card>\n\n        <v-dialog v-model=\"dialog_del\" width=\"550\">\n\n            <v-card>\n\n                <v-card-title>\n                    <span class=\"headline red--text\">Eliminar Ciudad</span>\n                </v-card-title>\n\n                <v-card-text>\t\t\t\t\t\n                    Â¿Esta seguro de eliminar la Ciudad seleccionada?.\t\t\t\t\t\n                </v-card-text>\n\n                <v-card-actions>\n                    <v-spacer></v-spacer>\n                    <v-btn color=\"primary\" dark text @click=\"dialog_del=false\">Cancelar</v-btn>\n                    <v-btn color=\"red\" text @click=\"deleteItem\" >Eliminar</v-btn>\n                </v-card-actions>\n\n            </v-card>\n\n        </v-dialog>\n\n        <v-dialog v-model=\"dialogAdd\" max-width=\"800\" persistent>\n            <v-card>\n                <v-card-text>                \n                    <v-row dense>\n                        <v-col sm12>\n                            <v-card                        \n                                height=\"100\"                                \n                            >                \n                                <v-card-text>\n                                    <v-select\n                                        :items=\"arrDepartamentos\"\n                                        item-value=\"codigo\"\n                                        item-text=\"descripcion\"\n                                        v-model=\"departamento\"                                \n                                        label=\"Departamento\" \n                                        return-object\n                                        @change=\"traeCiudades(departamento.codigo)\"                      \t\t\t\t\t\t\t\t\t\t\n                                    >\t\t\t\t\t\t\t\t\t\n                                    </v-select>\n                                </v-card-text>    \n                            </v-card>    \n                        </v-col>\n                    </v-row>\n\n                    <v-row>\n                        <v-col sm12>\n                            <v-card\n                                flat\n                                tile\n                                min-height=\"300\"\n                            >\n                                <v-card-text>\n                                    <v-checkbox                                               \n                                        v-model=\"selected\"                        \n                                        :readonly=\"readonly\"\n                                        color=\"primary\"    \n                                        label=\"Seleccionar Todas las Ciudades\"\n                                    ></v-checkbox>\n                                    <v-data-table :headers=\"headersciudad\" :items=\"arrCiudades\" :items-per-page=\"5\">\n                                        <template v-slot:item.seleccionar=\"{ item }\">                                            \n                                            <v-checkbox                                               \n                                                v-model=\"item.seleccionar\"                        \n                                                :readonly=\"readonly\"\n                                                color=\"primary\"                        \n                                            ></v-checkbox>                    \n                                        </template>\n\n                                    </v-data-table>\n                                </v-card-text>\n                            </v-card> \n                        </v-col>\n                    </v-row>\n                </v-card-text>\n\n                <v-card-actions>\n                    <div style=\"width:100%;text-align:right\">\n                        <v-btn color=\"primary\" dark text @click=\"saveitem\">Actualizar</v-btn>  \n                        <v-btn color=\"primary\" dark text @click=\"dialogAdd=false\">Cancelar</v-btn>                    \n                                          \n                    </div>    \n                </v-card-actions>\n\n            </v-card>        \n        </v-dialog>\n\n    </v-container>    \n</template>\n\n<script>\nimport proyectociudadesService from \"../servicios/ProyectosCiudadesService\"\nimport ciudadesService from \"../servicios/CiudadesService\"\nimport departamentosService from \"../servicios/DepartamentosService\"\n\nexport default {\n    name: 'Ciudades',\n    props: ['proyecto','readonly','convenioproyecto','nombreproyecto','codigocoordinador'],\n    data (){\n\n        return {\n            loading: false,\n            dialog_del:false,\n            dialogAdd:false,\n            itemactual:'',\n            departamento:'',\n            search:'',            \n            data: [],\n            headersdata: [\n                { text: 'Ciudad', value: 'nombreciudad',sortable: false,align: 'left', class:'subtitle-1 font-weight-bold black--text'},                \n                { text: 'AcciÃ³n', value: 'action',sortable: false,align: 'left', class:'subtitle-1 font-weight-bold black--text'}          \n            ],\n\n            arrDepartamentos:[],\n            arrCiudades:[],\n\n            headersciudad: [\n                { text: 'Ciudad', value: 'descripcion',sortable: false,align: 'left', class:'subtitle-1 font-weight-bold black--text'},\n                { text: 'Sel.', value: 'seleccionar',sortable: false,align: 'left', class:'subtitle-1 font-weight-bold black--text'}\n            ],\n\n            selected: 0\n        }\n    },\n\n    methods: {\n\n        showMessage (snack, time, color, text) {\n\n           this.$root.$emit('showSnack', {snack: snack, time: time, color: color, text: text})\n\n        },\n        \n        envioNotificaciones(mensajenotificacion,asuntocorreo, mensajecorreo){\n\n            this.$emit('envioNotificaciones', {mensajenotificacion: mensajenotificacion,asuntocorreo: asuntocorreo, mensajecorreo: mensajecorreo})\n\n        },\n      \n        traerdata(proyecto){\n\n            var _this = this\n            this.loading = true\n\n            proyectociudadesService.BuscarXProyecto(proyecto)\n                .then(function(res) {\n\n                    if (res.request) {\n                                    \n                        if(res.data){\n\n                            _this.data = res.data.data\n                            \n                        }  else {\n                            \n                            _this.data = []                          \n                        \n                        }\n\n                    } else {                        \t\n\n                        _this.data = []\n                        \n                    }    \n                    _this.loading = false                \n                    \n            }).catch(function(err) {\n\n                    _this.data = []\n                    _this.loading = false                \n                \n            })\n\n        },\n\n        traerDepartamentos(){\n\n            var _this = this            \n\n            departamentosService.getData()\n                .then(function(res) {\n\n                    if (res.request) {\n                                    \n                        if(res.data){\n\n                            _this.arrDepartamentos = res.data.data\n                            \n                        }  else {\n                            \n                            _this.arrDepartamentos = []                          \n                        \n                        }\n\n                    } else {                        \t\n\n                        _this.arrDepartamentos = []\n                        \n                    }        \n                    \n            }).catch(function(err) {\n\n                    _this.arrDepartamentos = []                  \n                \n            })\n\n        },\n\n        traeCiudades(departamento){\n\n            var _this = this            \n\n            proyectociudadesService.CiudadesSelDepto(this.proyecto, departamento)\n                .then(function(res) {\n\n                    if (res.request) {\n                                    \n                        if(res.data){\n\n                            _this.arrCiudades = res.data.data\n                            \n                        }  else {\n                            \n                            _this.arrCiudades = []                          \n                        \n                        }\n\n                    } else {                        \t\n\n                        _this.arrCiudades = []\n                        \n                    }        \n                    \n            }).catch(function(err) {\n\n                    _this.arrCiudades = []                  \n                \n            })\n\n        },\n\n        deleteItem(){\n            \n            var _this = this\n            this.loading = true            \n\n            console.log(this.proyecto,this.itemactual)\n\n            proyectociudadesService.DelData(_this.proyecto, _this.itemactual.ciudad)\n                .then(function(res) {\n\n                    if(res.statusText){\n\n                        _this.showMessage(true,3000,'success','Se eliminÃ³ la Ciudad con Ã©xito')\n\n                        _this.del_item = ''\t              \t  \t\t\n                        _this.traerdata(_this.proyecto)\n                        _this.dialog_del = false\n                        \n                        _this.agregaBitacora('ELIMINACION','SE ELIMINÃ LA CIUDAD CON CODIGO:' + _this.itemactual.codigo + \n                                                ', DESCRIPCION:' + _this.itemactual.nombreciudad + \n                                                '. QUE PERTENECE AL PROYECTO CON # DE CONVENIO: ' + _this.convenioproyecto + ' Y NOMBRE: ' + \n                                                _this.nombreproyecto)\n\n                        var mensajecorreo = \"Cordial Saludo,<br><br> \" +\n                                            \"Se eliminÃ³ la Ciudad : '\" + _this.itemactual.nombreciudad + \n                                            \"' del Proyecto con # de Convenio \" + \n                                            _this.convenioproyecto + \", Nombre: \" + _this.nombreproyecto +\n                                            \"<br><br>Agradeciendo su atenciÃ³n,<br><br> \" +                        \n                                            \"<b>SINCHI</b><br><br> \" +\n                                            \"<i>Este es un servicio de notificaciones generado automÃ¡ticamente por medio de \" +\n                                            \"correo electrÃ³nico, no lo responda.</i> <br>\"\n                        \n                        var mensajenotifica = \"Se eliminÃ³ la Ciudad : '\" + _this.itemactual.nombreciudad + \n                                              \"' del Proyecto con # de Convenio \" + \n                                              _this.convenioproyecto + \", Nombre: \" + _this.nombreproyecto\n\n                        _this.envioNotificaciones(mensajenotifica,'EliminaciÃ³n de Ciudades del Proyecto',mensajecorreo)                                 \n\n                    } else {\t                                         \t\n\n                        _this.showMessage(true,3000,'error',res.response.data.message) \t                  \t\n                    } \t                   \n                    _this.del_item = ''\t\t\t\t\t\t\n                    _this.loading = false\t                 \n                    \n            }).catch(function(err) {\n\n                _this.showMessage(true,3000,'error',err)\t    \n                _this.loading = false          \t\n                \n            })\n\n        },        \n\n        saveitem(){            \n\n            var totitems = this.arrCiudades.length\n            var dataFinal = []\n            \n            this.loading = true\n\n            for (let index = 0; index < totitems; index++) {\n                \n                const element = this.arrCiudades[index]\n\n                if(element['seleccionar']){\n\n                    dataFinal.push({ codigo:  element['codigo'], proyecto : this.proyecto, departamento: this.departamento.codigo})\n\n                }        \n\n            } \n\n            var _this = this\n\n            proyectociudadesService.guardarData(dataFinal)\n\t              .then(function(res) {\n\n\t              \t  if (res.response) {                           \n                            \n                          var error = res.response.data.message\n                          _this.showMessage(true,3000,'error',error)\n\n                      } else if(res.statusText){\n\t              \t  \t\t\n\t              \t  \t\tvar mensaje = ''\n\t\t\t\t\t\t\tvar accbitacora = ''\n\n\t              \t  \t\t_this.showMessage(true,3000,'success','Se ActualizarÃ³n/AgregarÃ³n las Ciudades al Proyecto con Ã©xito')\n             \t  \t\t\n\t              \t  \t\t_this.traerdata(_this.proyecto)\t              \t  \t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\n                            _this.agregaBitacora('ACTUALIZACION/CREACION','SE ACTUALIZARON/AGREGARON/ELIMINARON LAS CIUDADES AL PROYECTO CON # DE CONVENIO: ' \n                                                    + _this.convenioproyecto + ' Y NOMBRE: ' + _this.nombreproyecto)\n                            \n                            var mensajecorreo = \"Cordial Saludo,<br><br> \" +\n                                            \"Se Actualizaron/Crearon/Eliminaron las Ciudades para el Proyecto con # de Convenio \" + \n                                            _this.convenioproyecto + \", Nombre: \" + _this.nombreproyecto +\n                                            \"<br><br>Agradeciendo su atenciÃ³n,<br><br> \" +                        \n                                            \"<b>SINCHI</b><br><br> \" +\n                                            \"<i>Este es un servicio de notificaciones generado automÃ¡ticamente por medio de \" +\n                                            \"correo electrÃ³nico, no lo responda.</i> <br>\"\n                        \n                            var mensajenotifica = \"Se Actualizaron/Crearon/Eliminaron las Ciudades para el Proyecto con # de Convenio \" + \n                                                _this.convenioproyecto + \", Nombre: \" + _this.nombreproyecto\n\n                            _this.envioNotificaciones(mensajenotifica,'ActualizaciÃ³n/CreaciÃ³n/Eliminacion de Ciudades del Proyecto',mensajecorreo)\n\n                            _this.dialogAdd = false\n\n\t              \t  }else{\t                                         \t\n\n\t                  \t\t_this.showMessage(true,3000,'error',res.message) \t                  \t\n\t                  }\n\n\t                    _this.loading = false\t                 \n\t                   \t\n\t          \t}).catch(function(err) {\n\n\t          \t\t_this.showMessage(true,3000,'error',err)\t    \n\t          \t\t_this.loading = false          \t\n\t          \t\t\n\t\t\t\t})\n\n        },\n\n        agregaBitacora(accion, detalle){              \n\n            var data = {modulo:'CIUDADES PROYECTOS',accion:accion,detalle:detalle}\n            \n            this.$root.$emit('agregaBitacora', data)\n\n        },\n\n    },\n\n    watch: {\n\n        proyecto: function (val) {            \n\n            if(val!=0)\n                this.traerdata(val)\n        },\n\n        selected: function(val) {\n\n            for (let index = 0; index < this.arrCiudades.length; index++) {\n                    const element = this.arrCiudades[index]\n                    \n                    element['seleccionar'] =  val\n            }\n\n        }\n\n    },\n        \n    mounted() {\n        \n        this.traerDepartamentos()\n        this.traerdata(this.proyecto)\n\n    },   \n\n}\n</script>\n\n<style>\n\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CProyectosCiudades.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CProyectosCiudades.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CProyectosCiudades.vue?vue&type=template&id=6735f8f6&\"\nimport script from \"./CProyectosCiudades.vue?vue&type=script&lang=js&\"\nexport * from \"./CProyectosCiudades.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}