(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2380c4"],{fe5d:function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("v-container",{attrs:{fluid:""}},[t("v-form",[t("v-card",{attrs:{color:"transparent"}},[t("v-card-title",[e._v("\n                Detalle Seguimiento\n            \n                "),t("v-spacer"),t("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"",small:"",color:e.getColor(e.obssubdircientifica)},on:{click:function(a){e.dialog_vobosubdir=!0}}},[t("v-icon",{attrs:{dark:""}},[e._v("science")])],1)],1),t("v-card-text",[t("v-row",[t("v-col",{attrs:{sm12:""}},[t("b",[e._v("Actividad:")]),e._v(" "+e._s(e.txtactividad)+"\n                    ")])],1),t("v-row",[t("v-col",{attrs:{sm6:""}},[t("b",[e._v("Año:")]),e._v(" "+e._s(e.anno)+"\n                    ")]),t("v-col",{attrs:{sm6:""}},[t("b",[e._v("Mes:")]),e._v(" "+e._s(e.nombremes)+"\n                    ")])],1)],1)],1),t("br"),t("v-card",[t("v-card-text",[t("v-tabs",{attrs:{"background-color":"transparent",color:"primary",grow:""},model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[t("v-tab",{key:"DGE"},[e._v("\n                        Información\n                    ")]),e.dataseg.length>0?t("v-tab",{key:"ATS"},[e._v("\n                        Archivos técnicos de soporte\n                    ")]):e._e(),e.dataseg.length>0?t("v-tab",{key:"AAF"},[e._v("\n                        Archivos soporte del avance financiero\n                    ")]):e._e()],1),t("v-tabs-items",{model:{value:e.tab,callback:function(a){e.tab=a},expression:"tab"}},[t("v-tab-item",{key:"DGE"},[t("v-row",[t("v-col",{attrs:{sm6:""}},[t("v-textarea",{attrs:{filled:"",name:"input-5-2",label:"Logros",readonly:e.soloLectura},model:{value:e.logros,callback:function(a){e.logros=a},expression:"logros"}})],1),t("v-col",{attrs:{sm6:""}},[t("v-textarea",{attrs:{filled:"",name:"input-5-2",label:"Necesidades",readonly:e.soloLectura},model:{value:e.necesidades,callback:function(a){e.necesidades=a},expression:"necesidades"}})],1)],1),t("v-row",[t("v-col",{attrs:{sm6:""}},[t("v-textarea",{attrs:{filled:"",name:"input-5-2",label:"Alertas",readonly:e.soloLectura},model:{value:e.alertas,callback:function(a){e.alertas=a},expression:"alertas"}})],1),t("v-col",{attrs:{sm6:""}},[t("v-textarea",{attrs:{filled:"",name:"input-5-2",label:"Ampliación de la información",readonly:e.soloLectura},model:{value:e.ampliacioninfo,callback:function(a){e.ampliacioninfo=a},expression:"ampliacioninfo"}})],1)],1)],1),e.dataseg.length>0?t("v-tab-item",{key:"ATS"},[t("div",{staticStyle:{"padding-bottom":"10px"}},[t("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(a){return e.abrirDialogoAbrirArchivo("ATS",0)}}},[t("v-icon",{attrs:{dark:""}},[e._v("add")])],1)],1),t("v-data-table",{attrs:{headers:e.headarchivos,items:e.dataarcats,"disable-sort":!0,"disable-pagination":!0,"hide-default-footer":!0},scopedSlots:e._u([{key:"item.archivo.file_name",fn:function(a){var i=a.item;return[""!=i.archivo.file_path?t("a",{attrs:{target:"_blank",href:i.archivo.file_path}},[e._v("\n                                    "+e._s(i.archivo.file_name)+"\n                                ")]):t("span",[e._v(e._s(i.archivo.file_name))])]}},{key:"item.action",fn:function(a){var i=a.item;return[t("v-icon",{staticClass:"mr-5",attrs:{small:"",color:"primary"},on:{click:function(a){return e.abrirDialogoElimFile("ATS",i)}}},[e._v("\n                                    delete\n                                ")])]}}],null,!1,3848286818)})],1):e._e(),e.dataseg.length>0?t("v-tab-item",{key:"AAF"},[t("div",{staticStyle:{"padding-bottom":"10px"}},[t("v-btn",{attrs:{fab:"",dark:"",small:"",color:"primary"},on:{click:function(a){return e.abrirDialogoAbrirArchivo("AAF",0)}}},[t("v-icon",{attrs:{dark:""}},[e._v("add")])],1)],1),t("v-data-table",{attrs:{headers:e.headarchivos,items:e.dataarcaaf,"disable-sort":!0,"disable-pagination":!0,"hide-default-footer":!0},scopedSlots:e._u([{key:"item.archivo.file_name",fn:function(a){var i=a.item;return[""!=i.archivo.file_path?t("a",{attrs:{target:"_blank",href:i.archivo.file_path}},[e._v("\n                                    "+e._s(i.archivo.file_name)+"\n                                ")]):t("span",[e._v(e._s(i.archivo.file_name))])]}},{key:"item.action",fn:function(a){var i=a.item;return[t("v-icon",{staticClass:"mr-5",attrs:{small:"",color:"primary"},on:{click:function(a){return e.abrirDialogoElimFile("AAF",i)}}},[e._v("\n                                    delete\n                                ")])]}}],null,!1,1894406146)})],1):e._e()],1)],1),t("v-card-actions",[t("v-spacer"),0==e.soloLectura?t("v-btn",{attrs:{color:"primary",text:""},on:{click:e.saveitem}},[e._v("Actualizar Detalle")]):e._e()],1)],1)],1),t("v-dialog",{attrs:{width:"550"},model:{value:e.dialog_deletefile,callback:function(a){e.dialog_deletefile=a},expression:"dialog_deletefile"}},[t("v-card",[t("v-card-title",[t("span",{staticClass:"headline red--text"},[e._v("Eliminar Archivo")])]),t("v-card-text",[e._v("\n                    ¿Esta seguro de eliminar el Archivo "+e._s(e.filedelete)+" definitivamente?.\t\t\t\t\t\n                ")]),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:function(a){e.dialog_deletefile=!1}}},[e._v("Cancelar")]),t("v-btn",{attrs:{color:"red",text:""},on:{click:e.eliminarItemArchivos}},[e._v("Eliminar")])],1)],1)],1),t("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.dialog_vobosubdir,callback:function(a){e.dialog_vobosubdir=a},expression:"dialog_vobosubdir"}},[t("v-card",[t("v-card-title",[t("span",{staticClass:"headline"},[e._v("Observación SubDirección Científica")])]),t("v-card-text",[t("v-row",[t("v-textarea",{attrs:{filled:"",name:"input-7-4",label:"Observación",readonly:e.readvbsubdir},model:{value:e.obssubdircientifica,callback:function(a){e.obssubdircientifica=a},expression:"obssubdircientifica"}})],1)],1),t("v-card-actions",[t("v-spacer"),e.readvbsubdir?e._e():t("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:function(a){return e.actualizaObs("SC")}}},[e._v("Guardar")]),t("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:function(a){e.dialog_vobosubdir=!1}}},[e._v("Cancelar")])],1)],1)],1),t("v-dialog",{attrs:{width:"800"},model:{value:e.dialog_archivos,callback:function(a){e.dialog_archivos=a},expression:"dialog_archivos"}},[t("v-card",[t("v-card-title",[t("span",{staticClass:"headline red--text"},[e._v(e._s(e.formTitleArchivos))])]),t("v-card-text",[t("v-form",{ref:"validvbpreadd",model:{value:e.validarcadd,callback:function(a){e.validarcadd=a},expression:"validarcadd"}},[t("v-flex",[t("span",[e._v("Archivo")]),t("adjuntarArchivos",{attrs:{item:e.archivoactual,placeholder:"Cargar Archivo",tipoarchivo:".pdf"}})],1),t("br"),t("v-flex",[t("v-text-field",{attrs:{label:"Fecha cargue",type:"date",rules:[e.rules.required]},model:{value:e.fechaarchivo,callback:function(a){e.fechaarchivo=a},expression:"fechaarchivo"}})],1),t("br"),t("v-flex",[t("v-textarea",{attrs:{filled:"",name:"input-7-4",label:"Observación"},model:{value:e.observacionarchivo,callback:function(a){e.observacionarchivo=a},expression:"observacionarchivo"}})],1)],1)],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:function(a){e.dialog_archivos=!1,e.editArchivos=-1}}},[e._v("Cancelar")]),t("v-btn",{attrs:{color:"primary",text:"",disabled:!e.validarcadd},on:{click:e.adicionarArchivo}},[e._v("Agregar")])],1)],1)],1)],1)},o=[],r=t("a34a"),n=t.n(r),c=t("bc3a"),s=t.n(c),l=t("d89f"),d={getData:function(){return new Promise((function(e,a){s()({method:"POST",url:l["b"].apiUrl+"/ProyectosSegDet",dataType:"json"}).then((function(a){e(a)})).catch((function(a){e(a)}))}))},BuscarXItem:function(e,a,t){return new Promise((function(i,o){s()({method:"POST",url:l["b"].apiUrl+"/SegDetXItem",dataType:"json",data:{codigo:e,anno:a,mes:t}}).then((function(e){i(e)})).catch((function(e){i(e)}))}))},addupdData:function(e){return new Promise((function(a,t){s()({method:"POST",url:l["b"].apiUrl+"/addupdProyectoSegDet",dataType:"json",data:{data:e}}).then((function(e){a(e)})).catch((function(e){a(e)}))}))},uploadFile:function(e,a){return new Promise((function(t,i){s()({method:"POST",url:l["b"].apiUrl+"/addupdProyectoSegDet",dataType:"json",data:{codigo:e,anno:anno,mes:mes,file:a}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))},deleteFile:function(e,a,t,i,o){return new Promise((function(r,n){s()({method:"POST",url:l["b"].apiUrl+"/deleteFileSegDet",dataType:"json",data:{codigo:e,anno:a,mes:t,ruta:i,archivo:o}}).then((function(e){r(e)})).catch((function(e){r(e)}))}))},obsSubDirCientifica:function(e,a,t,i){return new Promise((function(o,r){s()({method:"POST",url:l["b"].apiUrl+"/obsSubDirCientifica",dataType:"json",data:{codigo:e,anno:a,mes:t,obssubdircientifica:i}}).then((function(e){o(e)})).catch((function(e){o(e)}))}))},getDataArchivos:function(e,a,t,i){return new Promise((function(o,r){s()({method:"POST",url:l["b"].apiUrl+"/seguimientoDetalleArchivos",dataType:"json",data:{codigo:e,anno:a,mes:t,tipo:i}}).then((function(e){o(e)})).catch((function(e){o(e)}))}))},adicionarArchivo:function(e,a,t,i,o,r,n,c){return new Promise((function(d,u){s()({method:"POST",url:l["b"].apiUrl+"/seguimientoDetalleAgregarArchivo",dataType:"json",data:{codigo:e,anno:a,mes:t,tipo:i,consecutivo:o,archivo:r,descripcion:n,fecha:c}}).then((function(e){d(e)})).catch((function(e){d(e)}))}))},eliminarArchivoXTipo:function(e,a,t,i,o,r){return new Promise((function(n,c){s()({method:"POST",url:l["b"].apiUrl+"/seguimientoDetalleEliminarArchivo",dataType:"json",data:{codigo:e,anno:a,mes:t,tipo:i,consecutivo:o,archivo:r}}).then((function(e){n(e)})).catch((function(e){n(e)}))}))}},u=d,h=t("3bb9"),v=(t("831b"),t("6181"));function f(e,a,t,i,o,r,n){try{var c=e[r](n),s=c.value}catch(l){return void t(l)}c.done?a(s):Promise.resolve(s).then(i,o)}function b(e){return function(){var a=this,t=arguments;return new Promise((function(i,o){var r=e.apply(a,t);function n(e){f(r,i,o,n,c,"next",e)}function c(e){f(r,i,o,n,c,"throw",e)}n(void 0)}))}}var m={name:"SeguimientoDet",props:["proyecto","codigo","txtactividad","anno","mes","readonly"],components:{adjuntarArchivos:function(){return t.e("chunk-2d2245ed").then(t.bind(null,"e09e"))}},data:function(){return{tab:null,dialog_archivos:!1,editArchivos:-1,itemactualArchivo:"",tipoarchivo:"",dataarcaaf:[],dataarcats:[],formTitleArchivos:"",codigoarchivo:0,observacionarchivo:"",fechaarchivo:"",archivoactual:{file_name:"",file_path:"",file_name_tmp:""},validarcadd:!1,loading:!1,convenioproyecto:"",nombreproyecto:"",codigocoordinador:"",logros:"",necesidades:"",alertas:"",ampliacioninfo:"",archivo:{file_name:"",file_path:"",file_name_tmp:""},nombremes:"",rutasarchivogen:"",filedelete:"",tipofiledelete:"",dialog_deletefile:"",obssubdircientifica:"",dialog_vobosubdir:!1,readvbsubdir:!0,usuarioDirCientifica:"",usuarioPlaneacion:"",usuaactual:"",soloLectura:!1,dataseg:[],headarchivos:[{text:"No.",align:"left",sortable:!1,value:"consecutivo",class:"subtitle-1 font-weight-bold black--text"},{text:"Archivo",align:"left",sortable:!1,value:"archivo.file_name",class:"subtitle-1 font-weight-bold black--text"},{text:"Fecha",align:"left",sortable:!1,value:"fecha",class:"subtitle-1 font-weight-bold black--text"},{text:"Descripción",align:"left",sortable:!1,value:"descripcion",class:"subtitle-1 font-weight-bold black--text"},{text:"Acción",value:"action",sortable:!1,class:"subtitle-1 font-weight-bold black--text"}],rules:{required:function(e){return!!e||"Campo requerido."}}}},methods:{devolverMes:function(){var e="";switch(this.mes){case 1:e="ENERO";break;case 2:e="FEBRERO";break;case 3:e="MARZO";break;case 4:e="ABRIL";break;case 5:e="MAYO";break;case 6:e="JUNIO";break;case 7:e="JULIO";break;case 8:e="AGOSTO";break;case 9:e="SEPTIEMBRE";break;case 10:e="OCTUBRE";break;case 11:e="NOVIEMBRE";break;case 12:e="DICIEMBRE";break;default:break}this.nombremes=e},showMessage:function(e,a,t,i){this.$root.$emit("showSnack",{snack:e,time:a,color:t,text:i})},envioNotificaciones:function(e,a,t){this.$emit("envioNotificaciones",{mensajenotificacion:e,asuntocorreo:a,mensajecorreo:t})},envionotificacionesUsuarios:function(e){var a=0,t=16,i=this.convenioproyecto;""!=this.usuarioDirCientifica&&"0"!=this.usuarioDirCientifica&&(a=this.usuarioDirCientifica,this.$root.$emit("enviarNotificaciones",{codigopersona:a,mensajenotificacion:e.mensajenotificacion,asuntocorreo:e.asuntocorreo,mensajecorreo:e.mensajecorreo,codigoopcion:t,numerointerno:i}))},traerDataProyecto:function(){var e=this;e.convenioproyecto="",e.nombreproyecto="",e.codigocoordinador="",h["a"].getDataXId(this.proyecto).then((function(a){a.request&&a.data&&(e.convenioproyecto=a.data.data[0].convenio,e.nombreproyecto=a.data.data[0].nombre,e.codigocoordinador=a.data.data[0].codigocoordinador)})).catch((function(e){}))},traerData:function(){var e=this;this.loading=!0,this.logros="",this.necesidades="",this.alertas="",this.ampliacioninfo="",this.archivo={file_name:"",file_path:"",file_name_tmp:""},this.rutasarchivogen="",this.dataseg=[],u.BuscarXItem(this.codigo,this.anno,this.mes).then((function(a){a.request&&a.data&&(e.dataseg=a.data.data,e.logros=e.dataseg[0].logros,e.necesidades=e.dataseg[0].necesidades,e.alertas=e.dataseg[0].alertas,e.ampliacioninfo=e.dataseg[0].ampliacioninfo,e.obssubdircientifica=null==e.dataseg[0].obssubdircientifica?"":e.dataseg[0].obssubdircientifica,e.rutasarchivogen=e.dataseg[0].rutasarchivogen,e.traerDatosArchivos("ATS"),e.traerDatosArchivos("AAF"),e.traerDataActividades(e.actividad.secuencia)),e.loading=!1})).catch((function(a){e.loading=!1}))},saveitem:function(){this.loading=!0;var e=this,a={codigo:this.codigo,anno:this.anno,mes:this.mes,logros:this.logros,necesidades:this.necesidades,alertas:this.alertas,ampliacioninfo:this.ampliacioninfo,archivo:this.archivo};u.addupdData(a).then((function(a){if(a.response){var t=a.response.data.message;e.showMessage(!0,7e3,"error",t)}else if(a.statusText){e.showMessage(!0,3e3,"success","Se Actualizó el Detalle del Seguimiento para la Actividad del Proyecto"),e.traerData(),e.agregaBitacora("ACTUALIZACION","SE ACTUALIZO EL DETALLE DEL SEGUIMIENTO DE LA ACTIVIDAD "+e.txtactividad+", PARA EL AÑO "+e.anno+"Y MES "+e.mes+" DEL PROYECTO CON # DE CONVENIO: "+e.convenioproyecto+" Y NOMBRE: "+e.nombreproyecto);var i="Cordial Saludo,<br><br> Se Actualizó el detalle del seguimiento de la actividad '"+e.txtactividad+"' para el año '"+e.anno+"' y mes '"+e.mes+"' del Proyecto con # de Convenio "+e.convenioproyecto+", Nombre: "+e.nombreproyecto+"<br><br>Agradeciendo su atención,<br><br> <b>SINCHI</b><br><br> <i>Este es un servicio de notificaciones generado automáticamente por medio de correo electrónico, no lo responda.</i> <br>",o="Se Actualizó el detalle del seguimiento de la actividad '"+e.txtactividad+"' para el año '"+e.anno+"' y mes '"+e.mes+"' del Proyecto con # de Convenio "+e.convenioproyecto+", Nombre: "+e.nombreproyecto;e.envioNotificaciones(o,"Actualización Detalle de Seguimiento de una Actividad de un Proyecto",i),e.envionotificacionesUsuarios({mensajenotificacion:o,asuntocorreo:"Actualización Detalle de Seguimiento de una Actividad de un Proyecto",mensajecorreo:i})}else e.showMessage(!0,3e3,"error",a.message);e.loading=!1})).catch((function(a){e.showMessage(!0,3e3,"error",a),e.loading=!1}))},eliminarArchivo:function(){var e=b(n.a.mark((function e(){var a,t;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="proyectos\\S"+this.codigo.toString()+this.anno.toString()+this.mes.toString()+"\\",e.next=3,u.deleteFile(this.codigo,this.anno,this.mes,a,this.filedelete);case 3:if(t=e.sent,!t.data){e.next=22;break}if("error"!=t.data.tipo){e.next=9;break}this.showMessage(!0,4e3,"error",t.data.respuesta),e.next=20;break;case 9:if("success"!=t.data.tipo){e.next=19;break}e.t0=this.tipofiledelete,e.next="archivo"===e.t0?13:15;break;case 13:return this.archivo={file_name:"",file_path:"",file_name_tmp:""},e.abrupt("break",16);case 15:return e.abrupt("break",16);case 16:this.showMessage(!0,4e3,"success",t.data.respuesta),e.next=20;break;case 19:this.showMessage(!0,4e3,"error","Se presentó un error al intentar realizar la operación");case 20:e.next=23;break;case 22:this.showMessage(!0,4e3,"error","Se presentó un error al intentar realizar la operación");case 23:this.dialog_deletefile=!1;case 24:case"end":return e.stop()}}),e,this)})));function a(){return e.apply(this,arguments)}return a}(),getColor:function(e){return""==e?"grey":"blue"},traeUsuarios:function(){var e=b(n.a.mark((function e(){var a,t;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.usuarioDirCientifica=0,this.usuarioPlaneacion=0,e.prev=2,e.next=5,v["a"].getUserXArea(3);case 5:return a=e.sent,e.next=8,v["a"].getUserXArea(4);case 8:t=e.sent,a.data&&(this.usuarioDirCientifica=a.data.data[0].userid),t.data&&(this.usuarioPlaneacion=t.data.data[0].userid),this.usuaactual=this.$session.get("usuarioid"),this.readvbsubdir=!0,this.soloLectura=!1,this.usuaactual==this.usuarioDirCientifica&&(this.readvbsubdir=!1,this.soloLectura=!0),this.usuaactual==this.usuarioPlaneacion&&(this.soloLectura=!0),e.next=20;break;case 18:e.prev=18,e.t0=e["catch"](2);case 20:return e.prev=20,e.finish(20);case 22:case"end":return e.stop()}}),e,this,[[2,18,20,22]])})));function a(){return e.apply(this,arguments)}return a}(),actualizaObs:function(e){var a="",t="",i="";if("SC"==e&&(a="DE SUBDIRECCIÓN CIENTÍFICA",t=this.obssubdircientifica),""!=t){i="Observación "+a+", Observación: "+t+")";var o=this;u.obsSubDirCientifica(this.codigo,this.anno,this.mes,t).then((function(e){if(e.response){var t=e.response.data.message;o.showMessage(!0,3e3,"error",t)}else if(e.statusText){o.showMessage(!0,3e3,"success","Se actualizó la observación "+a+" con éxito"),o.agregaBitacora("OBSERVACIÓN "+a,i);var r="Cordial Saludo,<br><br> Se Actualizó la Observación "+a+" del seguimiento de la actividad '"+o.txtactividad+"' para el año '"+o.anno+"' y mes '"+o.mes+"' del Proyecto con # de Convenio "+o.convenioproyecto+", Nombre: "+o.nombreproyecto+"<br><br>Agradeciendo su atención,<br><br> <b>SINCHI</b><br><br> <i>Este es un servicio de notificaciones generado automáticamente por medio de correo electrónico, no lo responda.</i> <br>",n="Se Actualizó la Observación "+a+" del seguimiento de la actividad "+o.txtactividad+" para el año "+o.anno+" y mes "+o.mes+" del Proyecto con # de Convenio "+o.convenioproyecto+", Nombre: "+o.nombreproyecto;o.envioNotificaciones(n,"Actualización de Observación de un Seguimiento de una Actividad",r),o.dialog_vobosubdir=!1}else o.showMessage(!0,3e3,"error",e.message)})).catch((function(e){o.showMessage(!0,3e3,"error",e)}))}else this.showMessage(!0,4e3,"error","Debe ingresar la Observación")},abrirDialogoElimFile:function(e,a){this.tipoarchivo=e,this.itemactualArchivo=a,this.dialog_deletefile=!0},abrirDialogoAbrirArchivo:function(e,a){this.tipoarchivo=e,this.itemactualArchivo="",this.editArchivos=a,this.codigoarchivo=0,this.rutaarchivo="",this.archivoactual={file_name:"",file_path:"",file_name_tmp:""},this.dialog_archivos=!0},resetArchivos:function(){this.codigoarchivo=0,this.rutaarchivo="",this.archivoactual={file_name:"",file_path:"",file_name_tmp:""}},eliminarItemArchivos:function(){var e=b(n.a.mark((function e(){var a;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.eliminarArchivoXTipo(this.codigo,this.anno,this.mes,this.tipoarchivo,this.itemactualArchivo.consecutivo,this.itemactualArchivo.archivo);case 3:if(a=e.sent,!a.response){e.next=7;break}return this.showMessage(!0,4e3,"error",a.response.data.message),e.abrupt("return");case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e["catch"](0),this.showMessage(!0,4e3,"error",e.t0),e.abrupt("return");case 13:this.traerDatosArchivos(this.tipoarchivo),this.dialog_deletefile=!1;case 15:case"end":return e.stop()}}),e,this,[[0,9]])})));function a(){return e.apply(this,arguments)}return a}(),adicionarArchivo:function(){var e=b(n.a.mark((function e(){var a,t,i;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=new Date,a.getFullYear().toString().padStart(2,"00")+"-"+(a.getMonth()+1).toString().padStart(2,"00")+"-"+a.getDate().toString(),""!=this.archivoactual.file_name){e.next=5;break}return this.showMessage(!0,3e3,"error","Debe seleccionar el archivo"),e.abrupt("return");case 5:if(0!=this.editArchivos){e.next=34;break}t=0,e.t0=this.tipoarchivo,e.next="ATS"===e.t0?10:"AAF"===e.t0?13:16;break;case 10:return t=this.dataarcats.reduce((function(e,a){return Math.max(e,a.codigo)}),0),t+=1,e.abrupt("break",18);case 13:return t=this.dataarcaaf.reduce((function(e,a){return Math.max(e,a.codigo)}),0),t+=1,e.abrupt("break",18);case 16:return t=-1,e.abrupt("break",18);case 18:if(0==parseFloat(this.codigo)){e.next=32;break}return e.prev=19,e.next=22,u.adicionarArchivo(this.codigo,this.anno,this.mes,this.tipoarchivo,t,this.archivoactual,this.observacionarchivo,this.fechaarchivo);case 22:if(i=e.sent,!i.response){e.next=26;break}return this.showMessage(!0,4e3,"error",i.response.data.message),e.abrupt("return");case 26:e.next=32;break;case 28:return e.prev=28,e.t1=e["catch"](19),this.showMessage(!0,4e3,"error",e.t1),e.abrupt("return");case 32:this.traerDatosArchivos(this.tipoarchivo),this.showMessage(!0,4e3,"success","Se agregó el archivo con éxito");case 34:this.observacionarchivo="",this.fechaarchivo="",this.editArchivos=-1,this.dialog_archivos=!1;case 38:case"end":return e.stop()}}),e,this,[[19,28]])})));function a(){return e.apply(this,arguments)}return a}(),traerDatosArchivos:function(e){var a=this;"ATS"==e?this.dataarcats=[]:this.dataarcaaf=[],u.getDataArchivos(this.codigo,this.anno,this.mes,e).then((function(t){if(t.request&&t.data){var i=t.data.data;if(i.length>0)for(var o=0;o<i.length;o++){var r=i[o],n=r.archivo,c=r.rutaarchivo,s={file_name:n,file_path:""!=c?c:"",file_name_tmp:""};switch(e){case"ATS":a.dataarcats.push({consecutivo:r.consecutivo,codigo:r.codigo,archivo:s,fecha:r.fecha,descripcion:r.observacion});break;case"AAF":a.dataarcaaf.push({consecutivo:r.consecutivo,codigo:r.codigo,archivo:s,fecha:r.fecha,descripcion:r.observacion});break;default:break}}}})).catch((function(e){}))},agregaBitacora:function(e,a){var t={modulo:"SEGUIMIENTO PLAN DE ACCION PROYECTOS",accion:e,detalle:a};this.$root.$emit("agregaBitacora",t)}},watch:{proyecto:function(e){0!=e&&this.traerDataProyecto()},codigo:function(e){0!=e&&this.traerData()},anno:function(e){0!=e&&this.traerData()},mes:function(e){0!=e&&(this.devolverMes(),this.traerData())}},mounted:function(){this.traerDataProyecto(),this.traerData(),this.devolverMes(),this.traeUsuarios()}},p=m,g=t("2877"),A=Object(g["a"])(p,i,o,!1,null,null,null);a["default"]=A.exports}}]);
//# sourceMappingURL=chunk-2d2380c4.aee5e62e.js.map