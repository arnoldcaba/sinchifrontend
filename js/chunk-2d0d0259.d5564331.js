(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d0259"],{6779:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{sm12:""}},[a("v-card",{attrs:{color:"transparent"}},[a("v-card-title",[e._v("Programación")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{sm12:""}},[a("b",[e._v("Objetivo:")]),e._v(" "+e._s(e.txtobjetivo)+"\n                        ")])],1),a("v-row",[a("v-col",{attrs:{sm12:""}},[a("b",[e._v("Actividad:")]),e._v(" "+e._s(e.txtactividad)+"\n                        ")])],1),a("v-row",[a("v-col",{attrs:{sm3:""}},[a("b",[e._v("Peso:")]),e._v(" "+e._s(e.peso)+" %\n                        ")]),a("v-col",{attrs:{sm3:""}},[a("b",[e._v("Meta:")]),e._v(" "+e._s(e.kpi)+"\n                        ")]),a("v-col",{attrs:{sm6:""}},[a("b",[e._v("Descripción Meta:")]),e._v(" "+e._s(e.descripcionkpi)+"\n                        ")])],1)],1)],1)],1)],1),a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{sm12:""}},[a("v-card",{attrs:{color:"transparent",height:"400"}},[a("v-card-text",[a("v-btn",{attrs:{color:"primary"},on:{click:e.traerdata}},[e._v("Traer Programación")]),a("br"),a("br"),a("v-data-table",{attrs:{headers:e.headers,items:e.dataseg,"items-per-page":3},scopedSlots:e._u([{key:"item",fn:function(t){var o=t.item;return[a("tr",[a("td",[a("span",{staticClass:"subtitle-1 font-weight-bold black--text"},[e._v("% Esperado")])]),a("td",[a("span",{staticClass:"subtitle-1 font-weight-bold black--text"},[e._v(e._s(o.anno))])]),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:"%",rules:[e.rules.maxPorcentaje],readonly:e.readonly},model:{value:o.mes1,callback:function(t){e.$set(o,"mes1",t)},expression:"item.mes1"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.readonly},model:{value:o.mes2,callback:function(t){e.$set(o,"mes2",t)},expression:"item.mes2"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.readonly},model:{value:o.mes3,callback:function(t){e.$set(o,"mes3",t)},expression:"item.mes3"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.readonly},model:{value:o.mes4,callback:function(t){e.$set(o,"mes4",t)},expression:"item.mes4"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.readonly},model:{value:o.mes5,callback:function(t){e.$set(o,"mes5",t)},expression:"item.mes5"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.readonly},model:{value:o.mes6,callback:function(t){e.$set(o,"mes6",t)},expression:"item.mes6"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.readonly},model:{value:o.mes7,callback:function(t){e.$set(o,"mes7",t)},expression:"item.mes7"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.readonly},model:{value:o.mes8,callback:function(t){e.$set(o,"mes8",t)},expression:"item.mes8"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.readonly},model:{value:o.mes9,callback:function(t){e.$set(o,"mes9",t)},expression:"item.mes9"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.readonly},model:{value:o.mes10,callback:function(t){e.$set(o,"mes10",t)},expression:"item.mes10"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.readonly},model:{value:o.mes11,callback:function(t){e.$set(o,"mes11",t)},expression:"item.mes11"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.readonly},model:{value:o.mes12,callback:function(t){e.$set(o,"mes12",t)},expression:"item.mes12"}})],1)]),a("tr",[a("td",[a("span",{staticClass:"subtitle-1 font-weight-bold black--text"},[e._v("Meta esperada")])]),a("td",[a("span",{staticClass:"subtitle-1 font-weight-bold black--text"},[e._v(e._s(o.anno))])]),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.readonly},model:{value:o.mesk1,callback:function(t){e.$set(o,"mesk1",t)},expression:"item.mesk1"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.readonly},model:{value:o.mesk2,callback:function(t){e.$set(o,"mesk2",t)},expression:"item.mesk2"}}),a("span",{staticStyle:{color:"red"}},[e._v(e._s(o.mesespk2))])],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.readonly},model:{value:o.mesk3,callback:function(t){e.$set(o,"mesk3",t)},expression:"item.mesk3"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.readonly},model:{value:o.mesk4,callback:function(t){e.$set(o,"mesk4",t)},expression:"item.mesk4"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.readonly},model:{value:o.mesk5,callback:function(t){e.$set(o,"mesk5",t)},expression:"item.mesk5"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.readonly},model:{value:o.mesk6,callback:function(t){e.$set(o,"mesk6",t)},expression:"item.mesk6"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.readonly},model:{value:o.mesk7,callback:function(t){e.$set(o,"mesk7",t)},expression:"item.mesk7"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.readonly},model:{value:o.mesk8,callback:function(t){e.$set(o,"mesk8",t)},expression:"item.mesk8"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.readonly},model:{value:o.mesk9,callback:function(t){e.$set(o,"mesk9",t)},expression:"item.mesk9"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.readonly},model:{value:o.mesk10,callback:function(t){e.$set(o,"mesk10",t)},expression:"item.mesk10"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.readonly},model:{value:o.mesk11,callback:function(t){e.$set(o,"mesk11",t)},expression:"item.mesk11"}})],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.readonly},model:{value:o.mesk12,callback:function(t){e.$set(o,"mesk12",t)},expression:"item.mesk12"}})],1)])]}}])})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:!e.readonly&&""!=e.objetivo,expression:"!readonly && objetivo != ''"}],attrs:{color:"primary",text:""},on:{click:e.saveitem}},[e._v("Actualizar Programación")])],1)],1)],1)],1)],1)},s=[],n=a("bc3a"),i=a.n(n),r=a("d89f"),l={getData:function(){return new Promise((function(e,t){i()({method:"POST",url:r["b"].apiUrl+"/ProyectosProgPlan",dataType:"json"}).then((function(t){e(t)})).catch((function(t){e(t)}))}))},DelData:function(e,t,a,o){return new Promise((function(s,n){i()({method:"POST",url:r["b"].apiUrl+"/delProyectoProgPlan",dataType:"json",data:{proyecto:e,objetivo:t,actividad:a,anno:o}}).then((function(e){s(e)})).catch((function(e){s(e)}))}))},BuscarXObjetivo:function(e,t){return new Promise((function(a,o){i()({method:"POST",url:r["b"].apiUrl+"/ProgXObjetivo",dataType:"json",data:{proyecto:e,objetivo:t}}).then((function(e){a(e)})).catch((function(e){a(e)}))}))},BuscarXObjetivoActividad:function(e){return new Promise((function(t,a){i()({method:"POST",url:r["b"].apiUrl+"/ProgXObjetivoActividad",dataType:"json",data:{actividad:e}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))},addupdData:function(e){return new Promise((function(t,a){i()({method:"POST",url:r["b"].apiUrl+"/addupdProyectoProgPlan",dataType:"json",data:{data:e}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))},addBasico:function(e){return new Promise((function(t,a){i()({method:"POST",url:r["b"].apiUrl+"/AddActividadBase",dataType:"json",data:{data:e}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))}},c=l,d=a("3bb9"),m=a("d761"),u={name:"ProgramacionPlan",props:["proyecto","objetivo","actividad","peso","kpi","descripcionkpi","txtobjetivo","txtactividad","readonly","activarprogramacion"],data:function(){return{loading:!1,itemactual:"",dialog_del:!1,convenioproyecto:"",nombreproyecto:"",codigocoordinador:"",headers:[{text:"",align:"left",sortable:!1,width:150},{text:"Año",align:"left",sortable:!1,value:"anno",class:"subtitle-1 font-weight-bold black--text"},{text:"Enero",value:"mes1",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Febrero",value:"mes2",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Marzo",value:"mes3",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Abril",value:"mes4",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Mayo",value:"mes5",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Junio",value:"mes6",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Julio",value:"mes7",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Agosto",value:"mes8",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Septiembre",value:"mes9",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Octubre",value:"mes10",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Noviembre",value:"mes11",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Diciembre",value:"mes12",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"}],dataseg:[],rules:{maxPorcentaje:function(e){return e<100||"El % no puede mayor a 100"}}}},methods:{showMessage:function(e,t,a,o){this.$root.$emit("showSnack",{snack:e,time:t,color:a,text:o})},envioNotificaciones:function(e,t,a){var o="0";this.$root.$emit("envioNotificaciones",{codigopersona:o,mensajenotificacion:e,asuntocorreo:t,mensajecorreo:a})},traerDataProyecto:function(){var e=this;e.convenioproyecto="",e.nombreproyecto="",e.codigocoordinador="",e.fechasuscripcion="",e.fechaterejecucion="",d["a"].getDataXId(this.proyecto).then((function(t){t.request&&t.data&&(e.convenioproyecto=t.data.data[0].convenio,e.nombreproyecto=t.data.data[0].nombre,e.codigocoordinador=t.data.data[0].codigocoordinador,e.fechasuscripcion=t.data.data[0].fechasuscripcion,e.fechaterejecucion=t.data.data[0].fechaterejecucion)})).catch((function(e){}))},traerdata:function(){var e=this;this.loading=!0,c.BuscarXObjetivoActividad(this.actividad).then((function(t){t.request&&t.data?e.dataseg=t.data:e.dataseg=[],e.traerInfoBase(e.objetivo,e.actividad),e.loading=!1})).catch((function(t){e.dataseg=[],e.loading=!1}))},traerInfoBase:function(e,t){var a=this,o=[];m["a"].FiltroxActividad(t).then((function(s){if(s.request)if(s.data){if(o=s.data.data,o.length>0){var n=new Date(o[0]["fechainicio"]),i=new Date(o[0]["fechafin"]),r=n.getFullYear(),l=i.getFullYear(),d={proyecto:a.proyecto,objetivo:e,actividad:t,annoini:r,annofin:l};c.addBasico(d).then((function(e){this.traerdata()})).catch((function(e){}))}}else o=[];else o=[]})).catch((function(e){o=[]}))},valida:function(){for(var e="",t=0;t<this.dataseg.length;t++){var a=parseFloat(this.dataseg[t].mes1)+parseFloat(this.dataseg[t].mes2)+parseFloat(this.dataseg[t].mes3)+parseFloat(this.dataseg[t].mes4)+parseFloat(this.dataseg[t].mes5)+parseFloat(this.dataseg[t].mes6)+parseFloat(this.dataseg[t].mes7)+parseFloat(this.dataseg[t].mes8)+parseFloat(this.dataseg[t].mes9)+parseFloat(this.dataseg[t].mes10)+parseFloat(this.dataseg[t].mes11)+parseFloat(this.dataseg[t].mes12),o=parseFloat(this.dataseg[t].mesk1)+parseFloat(this.dataseg[t].mesk2)+parseFloat(this.dataseg[t].mesk3)+parseFloat(this.dataseg[t].mesk4)+parseFloat(this.dataseg[t].mesk5)+parseFloat(this.dataseg[t].mesk6)+parseFloat(this.dataseg[t].mesk7)+parseFloat(this.dataseg[t].mesk8)+parseFloat(this.dataseg[t].mesk9)+parseFloat(this.dataseg[t].mesk10)+parseFloat(this.dataseg[t].mesk11)+parseFloat(this.dataseg[t].mesk12);return a>100?e="El porcentaje programado en el año '"+this.dataseg[t].anno+"' supero el 100%":o>this.kpi&&(e="El kpi programado en el año '"+this.dataseg[t].anno+"' supero el total de '"+this.kpi+"'"),e}},saveitem:function(){this.loading=!0;var e=this.valida();if(""!=e)return this.showMessage(!0,3e3,"error",e),void(this.loading=!1);var t=this;c.addupdData(this.dataseg).then((function(e){if(e.response){var a=e.response.data.message;t.showMessage(!0,7e3,"error",a)}else if(e.statusText){t.showMessage(!0,3e3,"success","Se Actualizó la programación al Plan de Acción de un Objetivo con éxito"),t.traerdata(),t.agregaBitacora("ACTUALIZACION","SE ACTUALIZO LA PROGRAMACION DEL PLAN DE ACCION DEL OBJETIVO "+t.txtobjetivo+"DEL PROYECTO CON # DE CONVENIO: "+t.convenioproyecto+" Y NOMBRE: "+t.nombreproyecto);var o="Cordial Saludo,<br><br> Se Actualizó la Programación del Plan de Acción del Objetivo '"+t.txtobjetivo+"' del Proyecto con # de Convenio "+t.convenioproyecto+", Nombre: "+t.nombreproyecto+"<br><br>Agradeciendo su atención,<br><br> <b>SINCHI</b><br><br> <i>Este es un servicio de notificaciones generado automáticamente por medio de correo electrónico, no lo responda.</i> <br>",s="Se Actualizó la Programación del Plan de Acción del Objetivo '"+t.txtobjetivo+"' del Proyecto con # de Convenio "+t.convenioproyecto+", Nombre: "+t.nombreproyecto;t.envioNotificaciones(s,"Actualización Seguimiento Plan de Acción de un Proyecto",o)}else t.showMessage(!0,3e3,"error",e.message);t.loading=!1})).catch((function(e){t.showMessage(!0,3e3,"error",e),t.loading=!1}))},agregaBitacora:function(e,t){var a={modulo:"PROGRAMACION PLAN DE ACCION PROYECTOS",accion:e,detalle:t};this.$root.$emit("agregaBitacora",a)}},watch:{proyecto:function(e){0!=e&&this.traerdata()},actividad:function(e){0!=e&&this.traerdata()},activarprogramacion:function(e){0!=e&&this.traerdata()}},mounted:function(){this.traerDataProyecto(),this.traerdata()}},f=u,b=a("2877"),v=Object(b["a"])(f,o,s,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-2d0d0259.d5564331.js.map