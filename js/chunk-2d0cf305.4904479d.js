(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cf305"],{"633e":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-container",{attrs:{fluid:""}},[a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{sm6:""}},[a("v-card",{attrs:{color:"transparent",height:"100"}},[a("v-card-text",[a("v-select",{attrs:{items:e.arrObjetivos,"item-value":"codigo","item-text":"descripcion","return-object":!0,label:"Objetivos"},on:{change:function(t){return e.traerActividades(e.objetivo.codigo)}},model:{value:e.objetivo,callback:function(t){e.objetivo=t},expression:"objetivo"}})],1)],1)],1),a("v-col",{attrs:{sm6:""}},[a("v-card",{attrs:{color:"transparent",height:"100"}},[a("v-card-text",[a("v-select",{attrs:{items:e.arrActividades,"item-value":"secuencia","item-text":"descripcion","return-object":!0,label:"Actividades"},on:{change:function(t){return e.traerdata()}},model:{value:e.actividad,callback:function(t){e.actividad=t},expression:"actividad"}})],1)],1)],1)],1),a("v-row",[a("v-col",{attrs:{sm12:""}},[a("v-card",{attrs:{color:"transparent"}},[a("v-card-title",[e._v("Seguimiento")]),a("v-card-text",[a("v-row",[a("v-col",{attrs:{sm3:""}},[a("b",[e._v("Peso:")]),e._v(" "+e._s(e.peso)+" %\n                        ")]),a("v-col",{attrs:{sm3:""}},[a("b",[e._v("Meta:")]),e._v(" "+e._s(e.kpi)+"\n                        ")]),a("v-col",{attrs:{sm6:""}},[a("b",[e._v("Descripción Meta:")]),e._v(" "+e._s(e.descripcionkpi)+"\n                        ")])],1),a("v-row",[a("v-col",{attrs:{sm12:""}},[a("b",[e._v("Recuerde: los valores en color rojo, son los valores esperados")])])],1)],1)],1)],1)],1),a("v-row",{attrs:{dense:""}},[a("v-col",{attrs:{sm12:""}},[a("v-card",{attrs:{color:"transparent",height:"400"}},[a("v-card-text",[a("v-btn",{attrs:{color:"primary"},on:{click:e.traerdata}},[e._v("Traer Programación")]),a("br"),a("br"),a("v-data-table",{attrs:{headers:e.headers,items:e.dataseg,"items-per-page":1},scopedSlots:e._u([{key:"item",fn:function(t){var o=t.item;return[a("tr",[a("td",[a("span",{staticClass:"subtitle-1 font-weight-bold black--text"},[e._v("% Ejecutado")])]),a("td",[a("span",{staticClass:"subtitle-1 font-weight-bold black--text"},[e._v(e._s(o.anno))])]),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:"%",rules:[e.rules.maxPorcentaje],readonly:e.soloLectura},model:{value:o.mes1,callback:function(t){e.$set(o,"mes1",t)},expression:"item.mes1"}}),a("p",{staticStyle:{color:"red"}},[e._v(e._s(o.mesesp1+" %"))]),a("p",[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){e.annoactual=o.anno,e.mesactual=1,e.itemactual=o,e.dialog_detalle=!0}}},[e._v("Detalle")])],1)],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.soloLectura},model:{value:o.mes2,callback:function(t){e.$set(o,"mes2",t)},expression:"item.mes2"}}),a("p",{staticStyle:{color:"red"}},[e._v(e._s(o.mesesp2+" %"))]),a("p",[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){e.annoactual=o.anno,e.mesactual=2,e.itemactual=o,e.dialog_detalle=!0}}},[e._v("Detalle")])],1)],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.soloLectura},model:{value:o.mes3,callback:function(t){e.$set(o,"mes3",t)},expression:"item.mes3"}}),a("p",{staticStyle:{color:"red"}},[e._v(e._s(o.mesesp3+" %"))]),a("p",[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){e.annoactual=o.anno,e.mesactual=3,e.itemactual=o,e.dialog_detalle=!0}}},[e._v("Detalle")])],1)],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.soloLectura},model:{value:o.mes4,callback:function(t){e.$set(o,"mes4",t)},expression:"item.mes4"}}),a("p",{staticStyle:{color:"red"}},[e._v(e._s(o.mesesp4+" %"))]),a("p",[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){e.annoactual=o.anno,e.mesactual=4,e.itemactual=o,e.dialog_detalle=!0}}},[e._v("Detalle")])],1)],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.soloLectura},model:{value:o.mes5,callback:function(t){e.$set(o,"mes5",t)},expression:"item.mes5"}}),a("p",{staticStyle:{color:"red"}},[e._v(e._s(o.mesesp5+" %"))]),a("p",[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){e.annoactual=o.anno,e.mesactual=5,e.itemactual=o,e.dialog_detalle=!0}}},[e._v("Detalle")])],1)],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.soloLectura},model:{value:o.mes6,callback:function(t){e.$set(o,"mes6",t)},expression:"item.mes6"}}),a("p",{staticStyle:{color:"red"}},[e._v(e._s(o.mesesp6+" %"))]),a("p",[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){e.annoactual=o.anno,e.mesactual=6,e.itemactual=o,e.dialog_detalle=!0}}},[e._v("Detalle")])],1)],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.soloLectura},model:{value:o.mes7,callback:function(t){e.$set(o,"mes7",t)},expression:"item.mes7"}}),a("p",{staticStyle:{color:"red"}},[e._v(e._s(o.mesesp7+" %"))]),a("p",[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){e.annoactual=o.anno,e.mesactual=7,e.itemactual=o,e.dialog_detalle=!0}}},[e._v("Detalle")])],1)],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.soloLectura},model:{value:o.mes8,callback:function(t){e.$set(o,"mes8",t)},expression:"item.mes8"}}),a("p",{staticStyle:{color:"red"}},[e._v(e._s(o.mesesp8+" %"))]),a("p",[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){e.annoactual=o.anno,e.mesactual=8,e.itemactual=o,e.dialog_detalle=!0}}},[e._v("Detalle")])],1)],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.soloLectura},model:{value:o.mes9,callback:function(t){e.$set(o,"mes9",t)},expression:"item.mes9"}}),a("p",{staticStyle:{color:"red"}},[e._v(e._s(o.mesesp9+" %"))]),a("p",[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){e.annoactual=o.anno,e.mesactual=9,e.itemactual=o,e.dialog_detalle=!0}}},[e._v("Detalle")])],1)],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.soloLectura},model:{value:o.mes10,callback:function(t){e.$set(o,"mes10",t)},expression:"item.mes10"}}),a("p",{staticStyle:{color:"red"}},[e._v(e._s(o.mesesp10+" %"))]),a("p",[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){e.annoactual=o.anno,e.mesactual=10,e.itemactual=o,e.dialog_detalle=!0}}},[e._v("Detalle")])],1)],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.soloLectura},model:{value:o.mes11,callback:function(t){e.$set(o,"mes11",t)},expression:"item.mes11"}}),a("p",{staticStyle:{color:"red"}},[e._v(e._s(o.mesesp11+" %"))]),a("p",[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){e.annoactual=o.anno,e.mesactual=11,e.itemactual=o,e.dialog_detalle=!0}}},[e._v("Detalle")])],1)],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",suffix:" %",rules:[e.rules.maxPorcentaje],readonly:e.soloLectura},model:{value:o.mes12,callback:function(t){e.$set(o,"mes12",t)},expression:"item.mes12"}}),a("p",{staticStyle:{color:"red"}},[e._v(e._s(o.mesesp12+" %"))]),a("p",[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:function(t){e.annoactual=o.anno,e.mesactual=12,e.itemactual=o,e.dialog_detalle=!0}}},[e._v("Detalle")])],1)],1)]),a("tr",[a("td",[a("span",{staticClass:"subtitle-1 font-weight-bold black--text"},[e._v("Meta ejecutada")])]),a("td",[a("span",{staticClass:"subtitle-1 font-weight-bold black--text"},[e._v(e._s(o.anno))])]),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.soloLectura},model:{value:o.mesk1,callback:function(t){e.$set(o,"mesk1",t)},expression:"item.mesk1"}}),a("span",{staticStyle:{color:"red"}},[e._v(e._s(o.mesespk1))])],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.soloLectura},model:{value:o.mesk2,callback:function(t){e.$set(o,"mesk2",t)},expression:"item.mesk2"}}),a("span",{staticStyle:{color:"red"}},[e._v(e._s(o.mesespk2))])],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.soloLectura},model:{value:o.mesk3,callback:function(t){e.$set(o,"mesk3",t)},expression:"item.mesk3"}}),a("span",{staticStyle:{color:"red"}},[e._v(e._s(o.mesespk3))])],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.soloLectura},model:{value:o.mesk4,callback:function(t){e.$set(o,"mesk4",t)},expression:"item.mesk4"}}),a("span",{staticStyle:{color:"red"}},[e._v(e._s(o.mesespk4))])],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.soloLectura},model:{value:o.mesk5,callback:function(t){e.$set(o,"mesk5",t)},expression:"item.mesk5"}}),a("span",{staticStyle:{color:"red"}},[e._v(e._s(o.mesespk5))])],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.soloLectura},model:{value:o.mesk6,callback:function(t){e.$set(o,"mesk6",t)},expression:"item.mesk6"}}),a("span",{staticStyle:{color:"red"}},[e._v(e._s(o.mesespk6))])],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.soloLectura},model:{value:o.mesk7,callback:function(t){e.$set(o,"mesk7",t)},expression:"item.mesk7"}}),a("span",{staticStyle:{color:"red"}},[e._v(e._s(o.mesespk7))])],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.soloLectura},model:{value:o.mesk8,callback:function(t){e.$set(o,"mesk8",t)},expression:"item.mesk8"}}),a("span",{staticStyle:{color:"red"}},[e._v(e._s(o.mesespk8))])],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.soloLectura},model:{value:o.mesk9,callback:function(t){e.$set(o,"mesk9",t)},expression:"item.mesk9"}}),a("span",{staticStyle:{color:"red"}},[e._v(e._s(o.mesespk8))])],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.soloLectura},model:{value:o.mesk10,callback:function(t){e.$set(o,"mesk10",t)},expression:"item.mesk10"}}),a("span",{staticStyle:{color:"red"}},[e._v(e._s(o.mesespk10))])],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.soloLectura},model:{value:o.mesk11,callback:function(t){e.$set(o,"mesk11",t)},expression:"item.mesk11"}}),a("span",{staticStyle:{color:"red"}},[e._v(e._s(o.mesespk11))])],1),a("td",[a("v-text-field",{attrs:{type:"number",min:"0",readonly:e.soloLectura},model:{value:o.mesk12,callback:function(t){e.$set(o,"mesk12",t)},expression:"item.mesk12"}}),a("span",{staticStyle:{color:"red"}},[e._v(e._s(o.mesespk12))])],1)])]}}])})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{directives:[{name:"show",rawName:"v-show",value:""!=e.objetivo&&0==e.soloLectura,expression:"objetivo != '' && soloLectura==false"}],attrs:{color:"primary",text:""},on:{click:e.saveitem}},[e._v("Actualizar Seguimiento")]),a("br"),a("br")],1)],1)],1)],1),a("v-dialog",{attrs:{width:"1200"},model:{value:e.dialog_detalle,callback:function(t){e.dialog_detalle=t},expression:"dialog_detalle"}},[a("v-card",[a("v-card-text",[a("detalle",{attrs:{proyecto:e.proyecto,codigo:e.actividad.secuencia,txtactividad:e.actividad.descripcion,anno:e.annoactual,mes:e.mesactual,readonly:e.readonly},on:{"update:proyecto":function(t){e.proyecto=t},"update:codigo":function(t){return e.$set(e.actividad,"secuencia",t)},"update:txtactividad":function(t){return e.$set(e.actividad,"descripcion",t)},"update:anno":function(t){e.annoactual=t},"update:mes":function(t){e.mesactual=t},"update:readonly":function(t){e.readonly=t}}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:function(t){e.dialog_detalle=!1}}},[e._v("Cancelar")])],1)],1)],1)],1)},s=[],i=a("a34a"),n=a.n(i),r=a("c088"),l=a("bc3a"),c=a.n(l),d=a("d89f"),u={getData:function(){return new Promise((function(e,t){c()({method:"POST",url:d["b"].apiUrl+"/ProyectosSegPlan",dataType:"json"}).then((function(t){e(t)})).catch((function(t){e(t)}))}))},DelData:function(e,t,a,o){return new Promise((function(s,i){c()({method:"POST",url:d["b"].apiUrl+"/delProyectoSeguimPlan",dataType:"json",data:{proyecto:e,objetivo:t,actividad:a,anno:o}}).then((function(e){s(e)})).catch((function(e){s(e)}))}))},BuscarXObjetivo:function(e,t){return new Promise((function(a,o){c()({method:"POST",url:d["b"].apiUrl+"/SeguimientoXObjetivo",dataType:"json",data:{proyecto:e,objetivo:t}}).then((function(e){a(e)})).catch((function(e){a(e)}))}))},addupdData:function(e){return new Promise((function(t,a){c()({method:"POST",url:d["b"].apiUrl+"/addupdProyectoSeguimPlan",dataType:"json",data:{data:e}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))},BuscarXObjetivoActividad:function(e){return new Promise((function(t,a){c()({method:"POST",url:d["b"].apiUrl+"/SegXObjetivoActividad",dataType:"json",data:{actividad:e}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))},addBasico:function(e){return new Promise((function(t,a){c()({method:"POST",url:d["b"].apiUrl+"/AddSegActividadBase",dataType:"json",data:{data:e}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))}},m=u,v=a("3bb9"),p=a("d761"),f=a("6181");function b(e,t,a,o,s,i,n){try{var r=e[i](n),l=r.value}catch(c){return void a(c)}r.done?t(l):Promise.resolve(l).then(o,s)}function h(e){return function(){var t=this,a=arguments;return new Promise((function(o,s){var i=e.apply(t,a);function n(e){b(i,o,s,n,r,"next",e)}function r(e){b(i,o,s,n,r,"throw",e)}n(void 0)}))}}var g={name:"ProgramacionSeg",props:["proyecto","onoffSeguimiento","readonly"],components:{detalle:function(){return a.e("chunk-2d2380c4").then(a.bind(null,"fe5d"))}},data:function(){return{loading:!1,dialog_detalle:!1,itemactual:"",actividad:"",objetivo:"",convenioproyecto:"",nombreproyecto:"",codigocoordinador:"",arrObjetivos:[],arrActividades:[],peso:0,kpi:0,descripcionkpi:"",txtobjetivo:"",txtactividad:"",annoactual:0,mesactual:0,usuarioDirCientifica:"",usuarioPlaneacion:"",usuaactual:"",soloLectura:!1,headers:[{text:"",align:"left",sortable:!1,width:150},{text:"Año",align:"left",sortable:!1,value:"anno",class:"subtitle-1 font-weight-bold black--text"},{text:"Enero",value:"mes1",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Febrero",value:"mes2",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Marzo",value:"mes3",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Abril",value:"mes4",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Mayo",value:"mes5",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Junio",value:"mes6",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Julio",value:"mes7",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Agosto",value:"mes8",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Septiembre",value:"mes9",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Octubre",value:"mes10",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Noviembre",value:"mes11",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"},{text:"Diciembre",value:"mes12",sortable:!1,align:"left",width:"100px",class:"subtitle-1 font-weight-bold black--text"}],dataseg:[],rules:{maxPorcentaje:function(e){return e<100||"El % no puede mayor a 100"}}}},methods:{showMessage:function(e,t,a,o){this.$root.$emit("showSnack",{snack:e,time:t,color:a,text:o})},envioNotificaciones:function(e,t,a){this.$emit("envioNotificaciones",{mensajenotificacion:e,asuntocorreo:t,mensajecorreo:a})},traerDataProyecto:function(){var e=this;e.convenioproyecto="",e.nombreproyecto="",e.codigocoordinador="",e.fechasuscripcion="",e.fechaterejecucion="",v["a"].getDataXId(this.proyecto).then((function(t){t.request&&t.data&&(e.convenioproyecto=t.data.data[0].convenio,e.nombreproyecto=t.data.data[0].nombre,e.codigocoordinador=t.data.data[0].codigocoordinador,e.fechasuscripcion=t.data.data[0].fechasuscripcion,e.fechaterejecucion=t.data.data[0].fechaterejecucion)})).catch((function(e){}))},traerObjetivos:function(e){var t=this;this.dataseg=[],this.arrActividades=[],r["a"].BuscarXProyecto(e).then((function(e){e.request&&e.data?t.arrObjetivos=e.data.data:t.arrObjetivos=[]})).catch((function(e){t.arrObjetivos=[]}))},traerActividades:function(e){var t=this;this.dataseg=[],p["a"].BuscarXProyObjSimple(this.proyecto,e).then((function(e){e.request&&e.data?(t.arrActividades=e.data.data,t.arrActividades=e.data.data):t.arrActividades=[]})).catch((function(e){t.arrActividades=[]}))},traerDataActividades:function(e){var t=this;this.peso=0,this.kpi=0,this.descripcionkpi="",this.txtobjetivo="",p["a"].FiltroxActividad(e).then((function(e){e.request&&e.data&&(t.peso=e.data.data[0].peso,t.kpi=e.data.data[0].kpi,t.descripcionkpi=e.data.data[0].descripcionkpi,t.txtactividad=e.data.data[0].descripcion)})).catch((function(e){}))},traerdata:function(){var e=this;this.loading=!0,m.BuscarXObjetivoActividad(this.actividad.secuencia).then((function(t){t.request&&t.data?(e.dataseg=t.data,e.traerDataActividades(e.actividad.secuencia)):e.dataseg=[],e.traerInfoBase(e.objetivo,e.actividad.secuencia),e.loading=!1})).catch((function(t){e.dataseg=[],e.loading=!1}))},traerInfoBase:function(e,t){var a=this,o=[];p["a"].FiltroxActividad(t).then((function(s){if(s.request)if(s.data){if(o=s.data.data,o.length>0){var i=new Date(o[0]["fechainicio"]),n=new Date(o[0]["fechafin"]),r=i.getFullYear(),l=n.getFullYear(),c={proyecto:a.proyecto,objetivo:e.codigo,actividad:t,annoini:r,annofin:l};m.addBasico(c).then((function(e){this.traerdata()})).catch((function(e){}))}}else o=[];else o=[]})).catch((function(e){o=[]}))},valida:function(){for(var e="",t=0;t<this.dataseg.length;t++){var a=parseFloat(this.dataseg[t].mes1)+parseFloat(this.dataseg[t].mes2)+parseFloat(this.dataseg[t].mes3)+parseFloat(this.dataseg[t].mes4)+parseFloat(this.dataseg[t].mes5)+parseFloat(this.dataseg[t].mes6)+parseFloat(this.dataseg[t].mes7)+parseFloat(this.dataseg[t].mes8)+parseFloat(this.dataseg[t].mes9)+parseFloat(this.dataseg[t].mes10)+parseFloat(this.dataseg[t].mes11)+parseFloat(this.dataseg[t].mes12),o=parseFloat(this.dataseg[t].mesk1)+parseFloat(this.dataseg[t].mesk2)+parseFloat(this.dataseg[t].mesk3)+parseFloat(this.dataseg[t].mesk4)+parseFloat(this.dataseg[t].mesk5)+parseFloat(this.dataseg[t].mesk6)+parseFloat(this.dataseg[t].mesk7)+parseFloat(this.dataseg[t].mesk8)+parseFloat(this.dataseg[t].mesk9)+parseFloat(this.dataseg[t].mesk10)+parseFloat(this.dataseg[t].mesk11)+parseFloat(this.dataseg[t].mesk12);return a>100?e="El porcentaje ejecutado en el año '"+this.dataseg[t].anno+"' supero el 100%":o>this.kpi&&(e="El kpi programado en el año '"+this.dataseg[t].anno+"' supero el total de '"+this.kpi+"'"),e}},saveitem:function(){this.loading=!0;var e=this.valida();if(""!=e)return this.showMessage(!0,3e3,"error",e),void(this.loading=!1);var t=this;m.addupdData(this.dataseg).then((function(e){if(e.response){var a=e.response.data.message;t.showMessage(!0,7e3,"error",a)}else if(e.statusText){t.showMessage(!0,3e3,"success","Se Actualizó el Seguimiento al Plan de Acción de un Objetivo con éxito"),t.traerdata(),t.agregaBitacora("ACTUALIZACION","SE ACTUALIZO EL SEGUIMIENTO DEL PLAN DE ACCION DEL OBJETIVO "+t.objetivo.descripcion+"DEL PROYECTO CON # DE CONVENIO: "+t.convenioproyecto+" Y NOMBRE: "+t.nombreproyecto);var o="Cordial Saludo,<br><br> Se Actualizó el seguimiento del Plan de Acción del Objetivo '"+t.objetivo.descripcion+"' del Proyecto con # de Convenio "+t.convenioproyecto+", Nombre: "+t.nombreproyecto+"<br><br>Agradeciendo su atención,<br><br> <b>SINCHI</b><br><br> <i>Este es un servicio de notificaciones generado automáticamente por medio de correo electrónico, no lo responda.</i> <br>",s="Se Actualizó el seguimiento del Plan de Acción del Objetivo '"+t.objetivo.descripcion+"' del Proyecto con # de Convenio "+t.convenioproyecto+", Nombre: "+t.nombreproyecto;t.envioNotificaciones(s,"Actualización Seguimiento Plan de Acción de un Proyecto",o)}else t.showMessage(!0,3e3,"error",e.message);t.loading=!1})).catch((function(e){t.showMessage(!0,3e3,"error",e),t.loading=!1}))},traeUsuarios:function(){var e=h(n.a.mark((function e(){var t,a;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.usuarioDirCientifica=0,this.usuarioPlaneacion=0,e.prev=2,e.next=5,f["a"].getUserXArea(3);case 5:return t=e.sent,e.next=8,f["a"].getUserXArea(4);case 8:a=e.sent,t.data&&(this.usuarioDirCientifica=t.data.data[0].userid),a.data&&(this.usuarioPlaneacion=a.data.data[0].userid),this.usuaactual=this.$session.get("usuarioid"),this.readvbsubdir=!0,this.soloLectura=!1,this.usuaactual==this.usuarioDirCientifica&&(this.readvbsubdir=!1,this.soloLectura=!0),this.usuaactual==this.usuarioPlaneacion&&(this.soloLectura=!0),e.next=20;break;case 18:e.prev=18,e.t0=e["catch"](2);case 20:return e.prev=20,e.finish(20);case 22:case"end":return e.stop()}}),e,this,[[2,18,20,22]])})));function t(){return e.apply(this,arguments)}return t}(),agregaBitacora:function(e,t){var a={modulo:"SEGUIMIENTO PLAN DE ACCION PROYECTOS",accion:e,detalle:t};this.$root.$emit("agregaBitacora",a)}},watch:{proyecto:function(e){0!=e&&(this.traerObjetivos(e),this.traerDataProyecto())},onoffSeguimiento:function(e){0!=e&&(this.objetivo="",this.traerObjetivos(e))}},mounted:function(){this.traerDataProyecto(),this.traerObjetivos(this.proyecto),this.traeUsuarios()}},x=g,k=a("2877"),y=Object(k["a"])(x,o,s,!1,null,null,null);t["default"]=y.exports}}]);
//# sourceMappingURL=chunk-2d0cf305.4904479d.js.map