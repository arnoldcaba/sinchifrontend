{"version":3,"sources":["webpack:///./src/components/CPlaAdqNecActividades.vue?a9a8","webpack:///src/components/CPlaAdqNecActividades.vue","webpack:///./src/components/CPlaAdqNecActividades.vue?98a1","webpack:///./src/components/CPlaAdqNecActividades.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","_v","_s","descripcionnecesidad","moneda","number_format","valornecesidad","staticStyle","enviovobo","on","$event","dialog","edit","itemactual","_e","staticClass","model","value","callback","$$v","search","expression","headers","data","scopedSlots","_u","key","fn","ref","item","_f","valor","symbol","thousandsSeparator","fractionCount","fractionSeparator","symbolPosition","symbolSpacing","loading","dialog_del","formTitle","valid","arrActividades","rules","required","secuenciaactividad","arrCatGasto","agregaTope","categoriagasto","nommoneda","nomsufijo","topecategoriagasto","formatearValorActividad","cerrarDialogo","saveitem","closeDialogoDel","deleteItem","staticRenderFns","component"],"mappings":"wHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,cAAc,CAACA,EAAG,SAAS,CAACA,EAAG,SAAS,CAACE,MAAM,CAAC,UAAY,MAAM,CAACF,EAAG,eAAe,CAACJ,EAAIO,GAAG,eAAeH,EAAG,cAAc,CAACA,EAAG,OAAO,CAACA,EAAG,IAAI,CAACJ,EAAIO,GAAG,oBAAoBP,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIS,yBAAyBL,EAAG,MAAMA,EAAG,OAAO,CAACA,EAAG,IAAI,CAACJ,EAAIO,GAAG,cAAcP,EAAIO,GAAGP,EAAIQ,GAAIR,EAAIU,OAAS,IAAOV,EAAIW,cAAcX,EAAIY,eAAe,UAAY,GAAGR,EAAG,MAAMA,EAAG,MAAM,CAACS,YAAY,CAAC,iBAAiB,SAAS,CAAmB,KAAjBb,EAAIc,UAAkBV,EAAG,QAAQ,CAACE,MAAM,CAAC,IAAM,GAAG,KAAO,GAAG,MAAQ,GAAG,MAAQ,WAAWS,GAAG,CAAC,MAAQ,SAASC,GAAQhB,EAAIiB,QAAS,EAAMjB,EAAIkB,KAAK,EAAElB,EAAImB,WAAW,MAAM,CAACf,EAAG,SAAS,CAACE,MAAM,CAAC,KAAO,KAAK,CAACN,EAAIO,GAAG,UAAU,GAAGP,EAAIoB,MAAM,GAAGhB,EAAG,SAAS,CAACA,EAAG,eAAe,CAACiB,YAAY,kBAAkB,CAACrB,EAAIO,GAAG,qDAAqDH,EAAG,cAAc,CAACA,EAAG,eAAe,CAACE,MAAM,CAAC,cAAc,SAAS,MAAQ,SAAS,cAAc,GAAG,eAAe,IAAIgB,MAAM,CAACC,MAAOvB,EAAU,OAAEwB,SAAS,SAAUC,GAAMzB,EAAI0B,OAAOD,GAAKE,WAAW,aAAa,GAAGvB,EAAG,WAAW,CAACS,YAAY,CAAC,cAAc,QAAQP,MAAM,CAAC,OAAS,KAAK,CAACF,EAAG,eAAe,CAACE,MAAM,CAAC,QAAUN,EAAI4B,QAAQ,MAAQ5B,EAAI6B,KAAK,iBAAiB,EAAE,gBAAe,EAAK,OAAS7B,EAAI0B,QAAQI,YAAY9B,EAAI+B,GAAG,CAAC,CAACC,IAAI,aAAaC,GAAG,SAASC,GACnzC,IAAIC,EAAOD,EAAIC,KACf,MAAO,CAAC/B,EAAG,OAAO,CAACJ,EAAIO,GAAGP,EAAIQ,GAAGR,EAAIoC,GAAG,WAAPpC,CAAmBmC,EAAKE,MAAM,CACtDC,OAAQtC,EAAIU,OACZ6B,mBAAoB,IACpBC,cAAe,IACfC,kBAAmB,IACnBC,eAAgB,QAChBC,eAAe,KACZ,yBAAyB,CAACX,IAAI,cAAcC,GAAG,SAASC,GAC5D,IAAIC,EAAOD,EAAIC,KACvB,MAAO,CAAmB,KAAjBnC,EAAIc,UAAkBV,EAAG,SAAS,CAACiB,YAAY,OAAOf,MAAM,CAAC,MAAQ,GAAG,MAAQ,UAAU,SAAWN,EAAI4C,SAAS7B,GAAG,CAAC,MAAQ,SAASC,GAAQhB,EAAIiB,QAAS,EAAMjB,EAAIkB,KAAK,EAAGlB,EAAImB,WAAWgB,KAAQ,CAACnC,EAAIO,GAAG,4CAA4CP,EAAIoB,KAAuB,KAAjBpB,EAAIc,UAAkBV,EAAG,SAAS,CAACiB,YAAY,OAAOf,MAAM,CAAC,MAAQ,GAAG,MAAQ,UAAU,SAAWN,EAAI4C,QAAQ,QAAU5C,EAAI4C,SAAW5C,EAAImB,aAAegB,GAAMpB,GAAG,CAAC,MAAQ,SAASC,GAAQhB,EAAI6C,YAAW,EAAM7C,EAAImB,WAAWgB,KAAQ,CAACnC,EAAIO,GAAG,8CAA8CP,EAAIoB,aAAa,IAAI,IAAI,GAAGhB,EAAG,WAAW,CAACE,MAAM,CAAC,YAAY,UAAUgB,MAAM,CAACC,MAAOvB,EAAU,OAAEwB,SAAS,SAAUC,GAAMzB,EAAIiB,OAAOQ,GAAKE,WAAW,WAAW,CAACvB,EAAG,SAAS,CAACA,EAAG,eAAe,CAACA,EAAG,OAAO,CAACiB,YAAY,YAAY,CAACrB,EAAIO,GAAGP,EAAIQ,GAAGR,EAAI8C,gBAAgB1C,EAAG,cAAc,CAACA,EAAG,cAAc,CAACE,MAAM,CAAC,eAAe,KAAK,CAACF,EAAG,WAAW,CAACE,MAAM,CAAC,KAAO,GAAG,OAAS,KAAK,CAACF,EAAG,SAAS,CAAC8B,IAAI,OAAOZ,MAAM,CAACC,MAAOvB,EAAS,MAAEwB,SAAS,SAAUC,GAAMzB,EAAI+C,MAAMtB,GAAKE,WAAW,UAAU,CAACvB,EAAG,SAAS,CAACA,EAAG,iBAAiB,CAACE,MAAM,CAAC,MAAQN,EAAIgD,eAAe,aAAa,YAAY,YAAY,kBAAkB,iBAAgB,EAAK,MAAQ,YAAY,MAAQ,CAAChD,EAAIiD,MAAMC,UAAU,SAAuB,GAAZlD,EAAIkB,MAAWI,MAAM,CAACC,MAAOvB,EAAsB,mBAAEwB,SAAS,SAAUC,GAAMzB,EAAImD,mBAAmB1B,GAAKE,WAAW,yBAAyB,GAAGvB,EAAG,SAAS,CAACA,EAAG,iBAAiB,CAACE,MAAM,CAAC,MAAQN,EAAIoD,YAAY,aAAa,SAAS,YAAY,SAAS,iBAAgB,EAAK,MAAQ,sBAAsB,MAAQ,CAACpD,EAAIiD,MAAMC,WAAWnC,GAAG,CAAC,OAAS,SAASC,GAAQ,OAAOhB,EAAIqD,WAAWrD,EAAIsD,kBAAkBhC,MAAM,CAACC,MAAOvB,EAAkB,eAAEwB,SAAS,SAAUC,GAAMzB,EAAIsD,eAAe7B,GAAKE,WAAW,qBAAqB,GAAGvB,EAAG,SAAS,CAACA,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,2BAA2B,SAAW,GAAG,OAASN,EAAIuD,UAAU,OAASvD,EAAIwD,WAAWlC,MAAM,CAACC,MAAOvB,EAAsB,mBAAEwB,SAAS,SAAUC,GAAMzB,EAAIyD,mBAAmBhC,GAAKE,WAAW,yBAAyB,GAAGvB,EAAG,SAAS,CAACA,EAAG,eAAe,CAACE,MAAM,CAAC,MAAQ,QAAQ,OAASN,EAAIU,OAAO,MAAQ,CAACV,EAAIiD,MAAMC,WAAWnC,GAAG,CAAC,KAAO,SAASC,GAAQ,OAAOhB,EAAI0D,wBAAwB1D,EAAIqC,SAASf,MAAM,CAACC,MAAOvB,EAAS,MAAEwB,SAAS,SAAUC,GAAMzB,EAAIqC,MAAMZ,GAAKE,WAAW,YAAY,IAAI,IAAI,IAAI,IAAI,GAAGvB,EAAG,iBAAiB,CAACA,EAAG,YAAYA,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,UAAU,KAAO,IAAIS,GAAG,CAAC,MAAQf,EAAI2D,gBAAgB,CAAC3D,EAAIO,GAAG,cAAcH,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,UAAU,KAAO,GAAG,UAAYN,EAAI+C,OAAOhC,GAAG,CAAC,MAAQf,EAAI4D,WAAW,CAAC5D,EAAIO,GAAG,cAAc,IAAI,IAAI,GAAGH,EAAG,WAAW,CAACE,MAAM,CAAC,YAAY,SAASgB,MAAM,CAACC,MAAOvB,EAAc,WAAEwB,SAAS,SAAUC,GAAMzB,EAAI6C,WAAWpB,GAAKE,WAAW,eAAe,CAACvB,EAAG,SAAS,CAACA,EAAG,eAAe,CAACA,EAAG,OAAO,CAACiB,YAAY,sBAAsB,CAACrB,EAAIO,GAAG,0BAA0BH,EAAG,cAAc,CAACJ,EAAIO,GAAG,mGAAmGH,EAAG,iBAAiB,CAACA,EAAG,YAAYA,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,UAAU,KAAO,GAAG,KAAO,IAAIS,GAAG,CAAC,MAAQf,EAAI6D,kBAAkB,CAAC7D,EAAIO,GAAG,cAAcH,EAAG,QAAQ,CAACE,MAAM,CAAC,MAAQ,MAAM,KAAO,IAAIS,GAAG,CAAC,MAAQf,EAAI8D,aAAa,CAAC9D,EAAIO,GAAG,eAAe,IAAI,IAAI,IAAI,IAC7pGwD,EAAkB,G,8lBCoKtB,OAEE,KAAF,cACE,MAAF,+DACA,wEACA,KALA,WAOA,OACM,OAAN,0BACA,WACA,UACA,QACA,cACA,cACA,aACA,SACA,UAEM,mBAAN,EACM,eAAN,EACM,mBAAN,EACM,MAAN,EACM,SAAN,GAEA,eAEA,aACA,aACA,sBACA,wBACA,eAEM,UAAN,GACM,UAAN,GAEA,cACM,KAAN,GACM,eAAN,GACM,YAAN,GAEA,SACA,iEACA,CAAQ,KAAR,sBAAQ,MAAR,OAAQ,UAAR,EAAQ,MAAR,qBACA,sDACA,mEACA,CAAQ,KAAR,SAAQ,MAAR,SAAQ,UAAR,IAEA,OACA,uDAKA,WAIA,SAEI,YAFJ,SAEA,SAEM,KAAN,yBAAQ,MAAR,EAAQ,KAAR,EAAQ,MAAR,EAAQ,KAAR,KAGA,UAPA,WASM,KAAN,qBACM,KAAN,iBACM,KAAN,qBACM,KAAN,SAGA,cAfA,WAiBA,iBACA,eACA,cAIA,UAvBA,WAyBA,WACM,KAAN,WAEM,EAAN,iEACA,kBAEA,WAEA,OAEY,EAAZ,YAUU,EAAV,QAEQ,EAAR,cAEA,mBAEQ,EAAR,QACQ,EAAR,eAMI,iBA1DJ,WA4DA,WAEM,KAAN,kBAEM,EAAN,uCACA,kBAEA,sBAEA,wBAMI,oBA3EJ,WA6EA,WAEM,KAAN,eAEM,EAAN,uCACA,kBAEA,WAEA,SAEY,EAAZ,4BAMA,wBAMA,yBApGA,WAsGA,WAEA,kBACA,kBACA,2BACA,6BACA,oBAEM,EAAN,qCACA,kBAEA,WAEA,SAEA,8CACA,8CACA,uDACA,yDACA,yCACA,wCAMA,wBAMA,gBAtIA,WAwIA,oBAEA,WA1IA,WA4IA,WACA,gBAEM,EAAN,sDACA,oCACA,kBAEA,cAEU,EAAV,kEAEU,EAAV,YACU,EAAV,YACU,EAAV,kBAEU,EAAV,gGACA,6CAIA,wCAEA,cACA,gBAEA,mBAEA,gCACA,iBAMI,cA9KJ,SA8KA,GAEA,IAEA,QAGA,IAqBA,GAlBA,sCACA,oCACA,0CAGA,0BACA,8BAGA,kCACA,6BACA,6BAGA,sBACA,mCAGA,WACA,0CACA,mCACA,8EAEA,0CAMA,oCACA,mBAEA,MAEA,2BAEA,sEAQA,uDAEA,+CAIA,8DACA,6CAEA,OAEA,uBACA,OAEA,yEAGA,uBAEA,oDAEA,mBAEA,oEASA,iDACA,kDAEA,IAEA,eACA,MAEA,oCACA,mBAGA,wBACA,KAEA,2CAIA,qCAEA,0EAIA,OAEA,uFAIA,QACA,0DAEA,eACA,MAEA,iCACA,gBAEA,wBACA,KAEA,2CAIA,WAEA,wGAIA,GAEA,SAEA,WAMA,SAnUA,qJAqUA,IACA,KACA,GAEgB,EAAhB,EACA,KAEA,sCACA,oCACA,wCACA,uCAGA,0BACA,6BACA,8BAGA,kCACA,6BACA,+BAGA,sBACA,qCA7VA,SAgWA,0DAhWA,UAgWA,EAhWA,OAkWA,wBACgB,EAAhB,GAEA,MArWA,wBAsWgB,KAAhB,8BAtWA,2BA2WA,KACA,KAEA,uCAEA,OAEA,uCAEA,OAEA,yDAEA,OAEA,+DAEA,QAIA,iCACA,oBACA,mCAEA,mCACA,mCACA,mCAEA,4BACA,0BACA,aAEA,WAEA,oCACA,kGAEA,oCAGA,GADA,MACA,8FAEA,iGAGkB,EAAlB,mCAIA,iCAIA,OACgB9D,KAAK2C,SAAU,EAE/B,IACA,8CAEA,mDAEA,uCAIgB,EAAhB,+DACkB,mBAAlB,EAAkB,eAAlB,EACkB,mBAAlB,EAAkB,YAAlB,iBACkB,MAAlB,+BAAkB,MAAlB,GAEgB,EAAhB,wBACA,kBAEA,eAEoB,IAApB,0BACoB,EAApB,mCAEA,iBAEA,SACA,KAEA,QACsB,EAAtB,YACsB,EAAtB,kBAEsB,EAAtB,SACsB,EAAtB,YAGA,kEAEA,cACA,UACA,cACA,cACoB,EAApB,UAEoB,EAApB,yBAIA,wCAGA,gBAEA,mBAEA,gCACA,gBA3dA,yGAgeI,WAheJ,SAgeA,GAEA,yBAGA,qBAEA,iDAEA,sEAIA,6DAMM,KAAN,aACM,KAAN,aAEA,mBACA,2BACA,qBACA,qBAII,cA7fJ,SA6fA,KAQA,GANA,MACA,wCAEA,OAGA,gBACA,gCAGA,kBAEA,mBACA,iBAEA,mBACA,6BAEA,oBAGI,cAphBJ,SAohBA,GAEA,0DAGA,OAFA,yBAEA,GAGA,eA5hBA,SA4hBA,GAEA,QAKA,OAJA,wBAEA,0BAEA,GAII,wBAviBJ,SAuiBA,GAEM,KAAN,8BAGI,eA5iBJ,SA4iBA,KAEM,IAAN,GAAQ,OAAR,YAAQ,OAAR,EAAQ,QAAR,GAEM,KAAN,kCAKE,MAAF,CACA,0BAQA,iBAEA,KACA,CACA,wBAEQ,KAAR,sDACQ,KAAR,8CAIA,yCACA,6CAEQ,IAAR,uCACU,IAAV,sBAEU,GAAV,0CAEA,yBACA,6CACA,eAEA,qBAEA,iDAEA,+EAIA,sEAKY,OAIJ,KAAR,aACQ,KAAR,aAEA,mBACA,2BACA,qBACA,yBAIA,iBACA,wBAII,gBAAJ,YAEA,OAEQ,KAAR,YACQ,KAAR,mBACA,2BACA,kCAKI,UAAJ,YAEA,OAEQ,KAAR,YACQ,KAAR,mBACA,2BACA,mCAKA,QAtsBA,WAwsBI,KAAJ,YACI,KAAJ,mBACA,2BACA,gCACI,KAAJ,gDC53B+V,I,YCO3VoB,EAAY,eACd,EACAjE,EACAgE,GACA,EACA,KACA,KACA,MAIa,aAAAC,E","file":"js/chunk-7712dcd0.c41549d2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-flex',[_c('v-card',{attrs:{\"elevation\":\"3\"}},[_c('v-card-title',[_vm._v(\"Necesidad\")]),_c('v-card-text',[_c('span',[_c('b',[_vm._v(\"Descripción:  \")]),_vm._v(_vm._s(_vm.descripcionnecesidad))]),_c('br'),_c('span',[_c('b',[_vm._v(\"Valor:  \")]),_vm._v(_vm._s((_vm.moneda + \" \" + (_vm.number_format(_vm.valornecesidad,2)))))])])],1),_c('br'),_c('div',{staticStyle:{\"padding-bottom\":\"10px\"}},[(_vm.enviovobo != 'S')?_c('v-btn',{attrs:{\"fab\":\"\",\"dark\":\"\",\"small\":\"\",\"color\":\"primary\"},on:{\"click\":function($event){_vm.dialog = true, _vm.edit=0,_vm.itemactual=''}}},[_c('v-icon',{attrs:{\"dark\":\"\"}},[_vm._v(\"add\")])],1):_vm._e()],1),_c('v-card',[_c('v-card-title',{staticClass:\"justify-center\"},[_vm._v(\"\\n\\t\\t\\t\\t\\tACTIVIDADES - NECESIDADES\\n\\t\\t\\t\\t\")]),_c('v-card-text',[_c('v-text-field',{attrs:{\"append-icon\":\"search\",\"label\":\"Buscar\",\"single-line\":\"\",\"hide-details\":\"\"},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}})],1),_c('v-layout',{staticStyle:{\"padding-top\":\"16px\"},attrs:{\"column\":\"\"}},[_c('v-data-table',{attrs:{\"headers\":_vm.headers,\"items\":_vm.data,\"items-per-page\":5,\"disable-sort\":true,\"search\":_vm.search},scopedSlots:_vm._u([{key:\"item.valor\",fn:function(ref){\nvar item = ref.item;\nreturn [_c('span',[_vm._v(_vm._s(_vm._f(\"currency\")(item.valor,{\n\t\t\t\t\t\t\t\t\tsymbol: _vm.moneda,\n\t\t\t\t\t\t\t\t\tthousandsSeparator: '.',\n\t\t\t\t\t\t\t\t\tfractionCount: '0',\n\t\t\t\t\t\t\t\t\tfractionSeparator: ',',\n\t\t\t\t\t\t\t\t\tsymbolPosition: 'front',\n\t\t\t\t\t\t\t\t\tsymbolSpacing: true\n\t\t\t\t\t\t\t\t}))+\"\\n\\t\\t\\t\\t\\t\\t\\t\")])]}},{key:\"item.action\",fn:function(ref){\n\t\t\t\t\t\t\t\tvar item = ref.item;\nreturn [(_vm.enviovobo != 'S')?_c('v-icon',{staticClass:\"mr-5\",attrs:{\"small\":\"\",\"color\":\"primary\",\"disabled\":_vm.loading},on:{\"click\":function($event){_vm.dialog = true, _vm.edit=1, _vm.itemactual=item}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\tedit\\n\\t\\t\\t\\t\\t\\t\\t\")]):_vm._e(),(_vm.enviovobo != 'S')?_c('v-icon',{staticClass:\"mr-5\",attrs:{\"small\":\"\",\"color\":\"primary\",\"disabled\":_vm.loading,\"loading\":_vm.loading && _vm.itemactual === item},on:{\"click\":function($event){_vm.dialog_del=true, _vm.itemactual=item}}},[_vm._v(\"\\n\\t\\t\\t\\t\\t\\t\\t\\tdelete\\n\\t\\t\\t\\t\\t\\t\\t\")]):_vm._e()]}}])})],1)],1)],1),_c('v-dialog',{attrs:{\"max-width\":\"1200px\"},model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',[_c('span',{staticClass:\"headline\"},[_vm._v(_vm._s(_vm.formTitle))])]),_c('v-card-text',[_c('v-container',{attrs:{\"grid-list-md\":\"\"}},[_c('v-layout',{attrs:{\"wrap\":\"\",\"column\":\"\"}},[_c('v-form',{ref:\"form\",model:{value:(_vm.valid),callback:function ($$v) {_vm.valid=$$v},expression:\"valid\"}},[_c('v-flex',[_c('v-autocomplete',{attrs:{\"items\":_vm.arrActividades,\"item-value\":\"secuencia\",\"item-text\":\"descripcionfull\",\"return-object\":true,\"label\":\"Actividad\",\"rules\":[_vm.rules.required],\"readonly\":_vm.edit != 0},model:{value:(_vm.secuenciaactividad),callback:function ($$v) {_vm.secuenciaactividad=$$v},expression:\"secuenciaactividad\"}})],1),_c('v-flex',[_c('v-autocomplete',{attrs:{\"items\":_vm.arrCatGasto,\"item-value\":\"codigo\",\"item-text\":\"nombre\",\"return-object\":true,\"label\":\"Categoría del Gasto\",\"rules\":[_vm.rules.required]},on:{\"change\":function($event){return _vm.agregaTope(_vm.categoriagasto)}},model:{value:(_vm.categoriagasto),callback:function ($$v) {_vm.categoriagasto=$$v},expression:\"categoriagasto\"}})],1),_c('v-flex',[_c('v-text-field',{attrs:{\"label\":\"Tope Categoría del Gasto\",\"readonly\":\"\",\"prefix\":_vm.nommoneda,\"sufijo\":_vm.nomsufijo},model:{value:(_vm.topecategoriagasto),callback:function ($$v) {_vm.topecategoriagasto=$$v},expression:\"topecategoriagasto\"}})],1),_c('v-flex',[_c('v-text-field',{attrs:{\"label\":\"Valor\",\"prefix\":_vm.moneda,\"rules\":[_vm.rules.required]},on:{\"blur\":function($event){return _vm.formatearValorActividad(_vm.valor)}},model:{value:(_vm.valor),callback:function ($$v) {_vm.valor=$$v},expression:\"valor\"}})],1)],1)],1)],1)],1),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\"},on:{\"click\":_vm.cerrarDialogo}},[_vm._v(\"Cancelar\")]),_c('v-btn',{attrs:{\"color\":\"primary\",\"text\":\"\",\"disabled\":!_vm.valid},on:{\"click\":_vm.saveitem}},[_vm._v(\"Guardar\")])],1)],1)],1),_c('v-dialog',{attrs:{\"max-width\":\"300px\"},model:{value:(_vm.dialog_del),callback:function ($$v) {_vm.dialog_del=$$v},expression:\"dialog_del\"}},[_c('v-card',[_c('v-card-title',[_c('span',{staticClass:\"headline red--text\"},[_vm._v(\"Eliminar Actividad\")])]),_c('v-card-text',[_vm._v(\"\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\\t¿Esta seguro de eliminar la Actividad seleccionada?\\t\\t\\t\\t\\t\\n\\t\\t\\t\\t\")]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\",\"dark\":\"\",\"text\":\"\"},on:{\"click\":_vm.closeDialogoDel}},[_vm._v(\"Cancelar\")]),_c('v-btn',{attrs:{\"color\":\"red\",\"text\":\"\"},on:{\"click\":_vm.deleteItem}},[_vm._v(\"Eliminar\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<v-container>\t\t\r\n\t\t <v-flex>\r\n\r\n\t\t\t <v-card elevation=\"3\">\r\n\t\t\t\t <v-card-title>Necesidad</v-card-title>\r\n\r\n\t\t\t\t <v-card-text>\t\t\t\t\t \r\n\t\t\t\t \t<span><b>Descripción:&nbsp;&nbsp;</b>{{ descripcionnecesidad }}</span><br>\r\n\t\t\t\t\t\r\n\t\t\t\t \t<span><b>Valor:&nbsp;&nbsp;</b>{{ `${moneda} ${number_format(valornecesidad,2)}` }}</span> \r\n\r\n\t\t\t\t </v-card-text>\r\n\t\t\t </v-card>\r\n\t\t\t<br>\r\n\r\n\t\t\t<div style=\"padding-bottom:10px\"> \r\n\t\t\t\t<v-btn v-if=\"enviovobo != 'S'\" fab dark small color=\"primary\" @click=\"dialog = true, edit=0,itemactual=''\" >\r\n\t\t\t\t\t<v-icon dark>add</v-icon>\t\t\t\t\r\n\t\t\t\t</v-btn>\r\n\t\t\t</div>\t\t\r\n\t\t\t<v-card >\r\n                <v-card-title class=\"justify-center\">\r\n\t\t\t\t\tACTIVIDADES - NECESIDADES\r\n\t\t\t\t</v-card-title>\r\n\t\t\t\t<v-card-text>\r\n\t\t\t\t\t<v-text-field\r\n\t\t\t\t\t\t\tv-model=\"search\"\r\n\t\t\t\t\t\t\tappend-icon=\"search\"\r\n\t\t\t\t\t\t\tlabel=\"Buscar\"\r\n\t\t\t\t\t\t\tsingle-line\r\n\t\t\t\t\t\t\thide-details\r\n\t\t\t\t\t\t></v-text-field>\r\n\t\t\t\t</v-card-text>\t\t\r\n\t\t\t\t<v-layout column style=\"padding-top:16px\">\r\n\t\t            <v-data-table :headers=\"headers\" :items=\"data\" :items-per-page=\"5\" \r\n                        :disable-sort=\"true\" \r\n                        :search=\"search\"\r\n                    >\r\n                        <template v-slot:item.valor=\"{ item }\">\r\n\t\t\t\t\t\t\t<span>{{ item.valor |  currency({\r\n\t\t\t\t\t\t\t\t\tsymbol: moneda,\r\n\t\t\t\t\t\t\t\t\tthousandsSeparator: '.',\r\n\t\t\t\t\t\t\t\t\tfractionCount: '0',\r\n\t\t\t\t\t\t\t\t\tfractionSeparator: ',',\r\n\t\t\t\t\t\t\t\t\tsymbolPosition: 'front',\r\n\t\t\t\t\t\t\t\t\tsymbolSpacing: true\r\n\t\t\t\t\t\t\t\t})}}\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</template>\t\r\n\r\n\t\t\t\t\t\t<template v-slot:item.action=\"{ item }\">\r\n\t\t\t\t\t\t\t<v-icon\r\n\t\t\t\t\t\t\t\tsmall\r\n\t\t\t\t\t\t\t\tclass=\"mr-5\"\r\n\t\t\t\t\t\t\t\tcolor=\"primary\" \r\n\t\t\t\t\t\t\t\t:disabled=\"loading\"\r\n\t\t\t\t\t\t\t\t@click=\"dialog = true, edit=1, itemactual=item\"\r\n\t\t\t\t\t\t\t\tv-if=\"enviovobo != 'S'\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tedit\r\n\t\t\t\t\t\t\t</v-icon>\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<v-icon\r\n\t\t\t\t\t\t\t\tsmall\r\n\t\t\t\t\t\t\t\tclass=\"mr-5\"\r\n\t\t\t\t\t\t\t\tcolor=\"primary\" \r\n\t\t\t\t\t\t\t\t:disabled=\"loading\"\r\n\t\t\t\t\t\t\t\t:loading=\"loading && itemactual === item \"\r\n\t\t\t\t\t\t\t\t@click=\"dialog_del=true, itemactual=item\"\r\n\t\t\t\t\t\t\t\tv-if=\"enviovobo != 'S'\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tdelete\r\n\t\t\t\t\t\t\t</v-icon>\t\t\t\r\n\t\t\t\t\t  \t</template>\r\n\t\t            </v-data-table>\t\t            \t\r\n\t\t          </v-layout>\r\n\t\t\t</v-card>\t\t \t\r\n\t\t</v-flex>\r\n\r\n\t\t<v-dialog v-model=\"dialog\" max-width=\"1200px\">\r\n          \t<v-card>\r\n\t\t\t\t<v-card-title>\r\n\t\t\t\t\t<span class=\"headline\">{{ formTitle }}</span>\t\t\t\t\t\r\n\t\t\t\t</v-card-title>  \r\n\r\n\t\t\t\t<v-card-text>\r\n\t\t\t\t\t<v-container grid-list-md>\r\n\t\t\t\t\t\t<v-layout wrap column>\t\t\r\n\t\t\t\t\t\t\t<v-form v-model=\"valid\" ref=\"form\">\r\n\t\t\t\t\t\t\t\t<v-flex>\r\n\t\t\t\t\t\t\t\t\t<v-autocomplete\r\n\t\t\t\t\t\t\t\t\t\t:items=\"arrActividades\"\r\n\t\t\t\t\t\t\t\t\t\titem-value=\"secuencia\"\r\n\t\t\t\t\t\t\t\t\t\titem-text=\"descripcionfull\"\r\n\t\t\t\t\t\t\t\t\t\tv-model=\"secuenciaactividad\"\r\n\t\t\t\t\t\t\t\t\t\t:return-object=\"true\"  \r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Actividad\" \t\r\n                                        :rules=\"[rules.required]\"\t\r\n                                        :readonly=\"edit != 0\"\t\t\t\t\t\t\t\t                    \t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t>\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</v-autocomplete>\r\n\t\t\t\t\t\t\t\t</v-flex>\r\n                                <v-flex>\r\n\t\t\t\t\t\t\t\t\t<v-autocomplete\r\n\t\t\t\t\t\t\t\t\t\t:items=\"arrCatGasto\"\r\n\t\t\t\t\t\t\t\t\t\titem-value=\"codigo\"\r\n\t\t\t\t\t\t\t\t\t\titem-text=\"nombre\"\r\n\t\t\t\t\t\t\t\t\t\tv-model=\"categoriagasto\"\r\n\t\t\t\t\t\t\t\t\t\t:return-object=\"true\"  \r\n\t\t\t\t\t\t\t\t\t\tlabel=\"Categoría del Gasto\" \r\n                                        @change=\"agregaTope(categoriagasto)\" \r\n                                        :rules=\"[rules.required]\"                                       \t\t\t\t\t\t\t\t\t                    \t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t>\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t</v-autocomplete>\r\n\t\t\t\t\t\t\t\t</v-flex>\r\n                                <v-flex>\r\n                                    <v-text-field v-model=\"topecategoriagasto\" label=\"Tope Categoría del Gasto\" \t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\treadonly\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t:prefix=\"nommoneda\"\r\n                                        :sufijo=\"nomsufijo\"\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t</v-text-field>\t\r\n                                </v-flex>\r\n                                <v-flex>\r\n                                    <v-text-field v-model=\"valor\" label=\"Valor\" \r\n\t\t\t\t\t\t\t\t\t\t:prefix=\"moneda\"\t\r\n                                        @blur=\"formatearValorActividad(valor)\"\r\n                                        :rules=\"[rules.required]\"\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t</v-text-field>\t\r\n                                </v-flex>    \t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</v-form>\t\t\t\t\r\n\t\t\t\t\t\t</v-layout>\r\n\t\t\t\t\t</v-container>\r\n\t\t\t\t</v-card-text>\r\n  \r\n\t\t\t\t<v-card-actions>\r\n\t\t\t\t\t<v-spacer></v-spacer>\r\n\t\t\t\t\t<v-btn color=\"primary\" text @click=\"cerrarDialogo\">Cancelar</v-btn>\r\n\t\t\t\t\t<v-btn color=\"primary\" text @click=\"saveitem\" :disabled=\"!valid\">Guardar</v-btn>\r\n\t\t\t\t</v-card-actions>\r\n\r\n          \t</v-card>\r\n\r\n        </v-dialog>\r\n\r\n        <v-dialog v-model=\"dialog_del\" max-width=\"300px\">\r\n\r\n          \t<v-card>\r\n\r\n\t\t\t\t<v-card-title>\r\n\t\t\t\t\t<span class=\"headline red--text\">Eliminar Actividad</span>\r\n\t\t\t\t</v-card-title>\r\n  \r\n\t\t\t\t<v-card-text>\t\t\t\t\t\r\n\t\t\t\t\t¿Esta seguro de eliminar la Actividad seleccionada?\t\t\t\t\t\r\n\t\t\t\t</v-card-text>\r\n  \r\n\t\t\t\t<v-card-actions>\r\n\t\t\t\t\t<v-spacer></v-spacer>\r\n\t\t\t\t\t<v-btn color=\"primary\" dark text @click=\"closeDialogoDel\">Cancelar</v-btn>\r\n\t\t\t\t\t<v-btn color=\"red\" text @click=\"deleteItem\" >Eliminar</v-btn>\r\n\t\t\t\t</v-card-actions>\r\n\r\n          \t</v-card>\r\n\r\n        </v-dialog>\r\n\t\t\r\n\t</v-container>\t\r\n</template>\r\n\r\n<script>\r\n\timport planesadquisicionService from \"../servicios/PlanesAdquisicionService\";\r\n\timport proyectosactividadesService from \"../servicios/ProyectosActividadesService\"\r\n    import presupuestoService from \"../servicios/PresupuestosService\"\r\n    \r\n\texport default {\r\n\r\n        name: 'Actividades',\r\n        props: ['planadquisicion','necesidad','descripcionnecesidad','moneda',\r\n                    'valortotal','proyecto','convenio','valornecesidad','tasa','enviovobo'],\r\n\t\tdata (){\r\n\r\n\t\t\treturn {\r\n                modulo:'ACTIVIDADES NECESIDADES',\t\t\t\t\t\t\t\r\n  \t\t\t\tloading: false,  \t\t\t\t\r\n  \t\t\t\tdialog:false,\r\n  \t\t\t\tedit:-1,\r\n  \t\t\t\tdialog_del:false,\r\n  \t\t\t\tprocessing:false,\r\n\t\t\t\tformTitle:'',\r\n\t\t\t\tvalid:false,\r\n\t\t\t\tsearch: '',                \r\n                \r\n                secuenciaactividad:0,\r\n                categoriagasto:0,\r\n                topecategoriagasto:0,\r\n                valor:0,\r\n                tipotope:'',\r\n\r\n\t\t\t\tpresupuesto:'',\r\n\r\n\t\t\t\tfuefinpgn:'',\r\n\t\t\t\tfuefinsgr:'',\r\n\t\t\t\tfuefincofinanciado:'',\r\n\t\t\t\tfuefinfuncionamiento:'',\r\n\t\t\t\tcoordinador:'',\r\n\r\n                nommoneda : '',\r\n                nomsufijo : '',\r\n                \r\n\t\t\t\titemactual:'',\r\n                data: [],                \r\n                arrActividades:[],\r\n                arrCatGasto:[],\r\n\r\n  \t\t\t\theaders: [  \t\t\t\t\t\r\n  \t\t\t\t\t{ text: 'Actividad',align: 'left',sortable: false,value: 'actividadtxt'},\r\n                    { text: 'Categoría del Gasto',align: 'left',sortable: false,value: 'categoriagastotxt'},\r\n\t\t\t\t\t{ text: 'Valor',align: 'left',sortable: false,value: 'valor'},\r\n\t\t\t\t\t{ text: 'Rubro Presupuestal',align: 'left',sortable: false,value: 'rubro'},\t\t\t\t\t\t        \r\n                    { text: 'Accion', value: 'action',sortable: false}\r\n\t\t\t\t],\t\t\t\t \r\n  \t\t\t\trules: {\r\n\t\t\t\t\trequired: value => !!value || 'Campo requerido.'\t\t\t\t\t\r\n\t\t        }\t\t\t\t\r\n\t        }\r\n\t    },\r\n\r\n\t    filters: {\t  \r\n            \r\n\t\t},\r\n\r\n\t    methods: {\r\n            \r\n            showMessage (snack, time, color, text) {\r\n\r\n                this.$root.$emit('showSnack', {snack: snack, time: time, color: color, text: text})\r\n\r\n            },\r\n\t\t\tresetForm () {                \r\n                \r\n                this.secuenciaactividad = 0\r\n                this.categoriagasto = 0\r\n                this.topecategoriagasto = 0\r\n                this.valor = 0\r\n\r\n\t\t\t},\r\n\t\t\tcerrarDialogo(){\r\n\r\n\t\t\t\tthis.resetForm()\r\n\t\t\t\tthis.dialog = false\r\n\t\t\t\tthis.edit=-1\r\n\r\n            },\r\n            \r\n\t\t    traerData(){\r\n\r\n\t\t     \tvar _this = this\r\n                this.loading = true\r\n\r\n              \tplanesadquisicionService.getActividadXNecesidad(this.planadquisicion,this.necesidad)\r\n                  .then(function(res) {\r\n\t\t\t\t\t  \r\n                      if (res.request) {\r\n                                        \r\n                          if(res.data){\r\n\r\n                            _this.data = res.data\r\n\r\n                          }  else {\r\n                            \r\n                            _this.data = []\r\n                          \r\n                          }\r\n\r\n                      } else {                        \t\r\n\r\n                      \t_this.data = []                        \t\r\n                      }    \r\n                      _this.loading = false                \r\n                      \r\n              \t}).catch(function(err) {\r\n\r\n              \t\t_this.data = []   \r\n              \t\t_this.loading = false                \r\n              \t\t\r\n\t\t\t\t})\r\n\r\n            },\r\n            \r\n            traerActividades(){\r\n\r\n\t\t     \tvar _this = this\r\n                \r\n                this.arrActividades = []\r\n\r\n              \tproyectosactividadesService.FiltroXProyectoAll(this.proyecto)\r\n                  .then(function(res) {\r\n\r\n\t\t\t\t\t  _this.arrActividades = res\r\n                      \r\n              \t}).catch(function(err) {              \r\n                      \r\n\t\t\t\t})\r\n\r\n            },\r\n\t\t\t\r\n            traerCategoriaGasto(){\r\n\r\n\t\t     \tvar _this = this\r\n                \r\n                this.arrCatGasto = []\r\n\r\n              \tpresupuestoService.getCatGasXConvenio(this.convenio)\r\n                  .then(function(res) {\r\n\r\n                      if (res.request) {\r\n                                        \r\n                          if(res.data){\r\n\r\n                            _this.arrCatGasto = res.data.data\r\n\r\n                          }\r\n\r\n                      }               \r\n                      \r\n              \t}).catch(function(err) {              \r\n              \t\t\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\ttraerPresupuestoConvenio(){\r\n\r\n\t\t     \tvar _this = this\r\n\t\t\t\t\r\n\t\t\t\tthis.fuefinpgn = ''\r\n\t\t\t\tthis.fuefinsgr = ''\r\n\t\t\t\tthis.fuefincofinanciado = ''\r\n\t\t\t\tthis.fuefinfuncionamiento = ''\r\n\t\t\t\tthis.coordinador = ''\r\n\r\n              \tpresupuestoService.getDataXConvenio(this.convenio)\r\n                  .then(function(res) {\r\n\r\n                      if (res.request) {\r\n                                        \r\n                          if(res.data){\r\n\r\n\t\t\t\t\t\t\t_this.fuefinpgn = res.data.data[0].fuefinanciacionpgn\r\n\t\t\t\t\t\t\t_this.fuefinsgr = res.data.data[0].fuefinanciacionsgr\r\n\t\t\t\t\t\t\t_this.fuefincofinanciado = res.data.data[0].fuefinanciacioncof\r\n\t\t\t\t\t\t\t_this.fuefinfuncionamiento = res.data.data[0].fuefinanciacionfun\r\n\t\t\t\t\t\t\t_this.coordinador = res.data.data[0].coordinador\r\n\t\t\t\t\t\t\t_this.presupuesto = res.data.data[0].codigo\r\n\r\n                          }\r\n\r\n                      }               \r\n                      \r\n              \t}).catch(function(err) {              \r\n              \t\t\r\n\t\t\t\t})\r\n\r\n\t\t    },\r\n\r\n\t\t\tcloseDialogoDel () {\r\n\t\t\t\t  \r\n\t\t\t\tthis.dialog_del = false\r\n\t\t\t},\r\n\t\t\tdeleteItem() {\r\n\t\t\t\t\r\n\t\t\t\tvar _this = this\r\n\t\t\t\tthis.loading = true\r\n\r\n                planesadquisicionService.delActividad(this.planadquisicion,this.necesidad,\r\n                                                    this.itemactual.secuenciaactividad)\r\n\t              .then(function(res) {\r\n\r\n\t              \t  if(res.statusText){\r\n\r\n                        _this.showMessage(true,3000,'success','Se eliminó la Actividad con éxito')\r\n\r\n                        _this.del_item = ''\t              \t  \t\t\r\n                        _this.traerData()\r\n                        _this.closeDialogoDel()\r\n\r\n                        _this.agregaBitacora('ELIMINACION','SE ELIMINÓ LA ACTIVIDAD. CODIGO:' + _this.itemactual.secuenciaactividad + \r\n\t\t\t\t\t\t\t\t\t\t\t', DESCRIPCIÓN:' + _this.itemactual.actividadtxt)\r\n\r\n\t              \t  }else{\t                                         \t\r\n\r\n\t                  \t_this.showMessage(true,3000,'error',res.message) \t                  \t\r\n\t                  } \t                   \r\n\t\t\t\t\t\t_this.del_item = ''\t\t\t\t\t\t\r\n\t                    _this.loading = false\t                 \r\n\t                   \t\r\n\t          \t}).catch(function(err) {\r\n\r\n\t          \t\t_this.showMessage(true,3000,'error',err)\t    \r\n\t          \t\t_this.loading = false          \t\r\n\t          \t\t\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\r\n            validaGuardar(arrCategorias){\t\t\t\t\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar codigoactividad = 0\r\n\t\t\t\t\tvar nombreactividad = ''\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar codigocategoriagasto = 0\r\n\t\t\t\t\tvar nombrecategoriagasto = ''\r\n\r\n\t\t\t\t\tif(typeof this.secuenciaactividad == 'object'){\r\n\t\t\t\t\t\tcodigoactividad = this.secuenciaactividad.secuencia\r\n\t\t\t\t\t\tnombreactividad = this.secuenciaactividad.descripcionfull\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcodigoactividad = this.secuenciaactividad\r\n\t\t\t\t\t\tnombreactividad = this.itemactual.actividadtxt\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(typeof this.categoriagasto == 'object'){\r\n\t\t\t\t\t\tcodigocategoriagasto = this.categoriagasto.codigo\r\n\t\t\t\t\t\tnombrecategoriagasto = this.categoriagasto.nombre\r\n\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tcodigocategoriagasto = this.categoriagasto\r\n\t\t\t\t\t\tnombrecategoriagasto = this.itemactual.categoriagastotxt\r\n\t\t\t\t\t}                \r\n\r\n\t\t\t\t\tif(this.edit){\r\n\t\t\t\t\t\tif(codigoactividad == this.itemactual.secuenciaactividad && \r\n\t\t\t\t\t\t\tcodigocategoriagasto == this.itemactual.categoriagasto && \r\n\t\t\t\t\t\t\tparseFloat(this.limpiarMoneda(this.valor)) == parseFloat(this.itemactual.valor)){\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\treturn 'No hay datos para actualizar'\r\n\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tfor (let index = 0; index < this.data.length; index++) {\r\n\t\t\t\t\t\t\tconst element = this.data[index]\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlet posicion = index + 1\r\n\r\n\t\t\t\t\t\t\tif(codigoactividad == element.secuenciaactividad){\r\n\r\n\t\t\t\t\t\t\t\treturn \"La Actividad ya ha salido seleccionada en el item No. '\" + posicion + \"'\"\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(this.valor == '' || this.valor == '0' || this.valor == undefined){\r\n\r\n\t\t\t\t\t\treturn 'Debe ingresar el Valor de la Actividad'\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tlet valtope = parseFloat(this.limpiarMoneda(this.topecategoriagasto))\r\n\t\t\t\t\t\tlet valactual = parseFloat(this.limpiarMoneda(this.valor))\r\n\r\n\t\t\t\t\t\tif(valtope > 0 ){\r\n\r\n\t\t\t\t\t\t\tif(this.tipotope == 'M'){\r\n\t\t\t\t\t\t\t\tif(valactual > valtope) {\r\n\r\n\t\t\t\t\t\t\t\t\treturn 'El Valor de la Actividad no puede superar el valor del Tope'\r\n\r\n\t\t\t\t\t\t\t\t}        \r\n\t\t\t\t\t\t\t} else if(this.tipotope == 'P'){\r\n\r\n\t\t\t\t\t\t\t\tlet valmaximo = ((parseFloat(this.valortotal) * parseFloat(valtope)) / 100)\r\n\r\n\t\t\t\t\t\t\t\tif(valactual > parseFloat(valmaximo)){\r\n\r\n\t\t\t\t\t\t\t\t\treturn 'El Valor de la Actividad no puede superar el valor del Tope'\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet valactualactividad = parseFloat(this.limpiarMoneda(this.valor))\r\n\t\t\t\t\tlet totalconvenio = parseFloat(this.limpiarMoneda(this.valortotal))\r\n\r\n\t\t\t\t\tlet total = 0\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(this.edit == 0)\r\n\t\t\t\t\t\ttotal += valactualactividad\r\n\r\n\t\t\t\t\tfor (let index = 0; index < this.data.length; index++) {\r\n\t\t\t\t\t\tconst element = this.data[index]\r\n\r\n\t\t\t\t\t\t//si se esta actualizando se debe validar con el valor digitado no con el que estaba\r\n\t\t\t\t\t\tif(codigoactividad == element.secuenciaactividad)\r\n\t\t\t\t\t\t\ttotal += valactualactividad\r\n\t\t\t\t\t\telse\t\r\n\t\t\t\t\t\t\ttotal += parseFloat(this.limpiarMoneda(element.valor))\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(total > parseFloat(this.valornecesidad)){\r\n\r\n\t\t\t\t\t\treturn 'El Valor total de las Actividades supera el valor de la Necesidad'\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(total > totalconvenio){\r\n\r\n\t\t\t\t\t\treturn 'El Valor total de las Actividades supera el valor Total del Acuerdo Específico'\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar totalcategorias = 0\r\n\t\t\t\t\tvar valortopecategoria = parseFloat(this.limpiarMoneda(this.topecategoriagasto))\r\n\r\n\t\t\t\t\tif(this.edit == 0)\r\n\t\t\t\t\t\ttotalcategorias += valactualactividad\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tfor (let index = 0; index < arrCategorias.data.length; index++) {\r\n\t\t\t\t\t\tconst element = arrCategorias.data[index]\r\n\r\n\t\t\t\t\t\tif(codigoactividad == element.secuenciaactividad)\r\n\t\t\t\t\t\t\ttotalcategorias += valactualactividad\r\n\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\ttotalcategorias += parseFloat(this.limpiarMoneda(element.valor))\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(totalcategorias > valortopecategoria){\r\n\r\n\t\t\t\t\t\treturn 'El Valor total de las Actividades para la Categoría del Gasto seleccionada supera el tope de la misma'\r\n\r\n\t\t\t\t\t}\t\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn ''\r\n\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn error\r\n\r\n\t\t\t\t}\r\n\r\n            },\t\t\r\n\r\n\t\t\tasync saveitem(){\r\n\t\t\t\t\r\n\t\t\t\tvar codigoactividad = 0\r\n\t\t\t\tvar codigoactividadcompleto = ''\r\n                var nombreactividad = ''\r\n                \r\n                var codigocategoriagasto = 0\r\n\t\t\t\tvar nombrecategoriagasto = ''\r\n\r\n\t\t\t\tif(typeof this.secuenciaactividad == 'object'){\r\n\t\t\t\t\tcodigoactividad = this.secuenciaactividad.secuencia\r\n\t\t\t\t\tnombreactividad = this.secuenciaactividad.descripcionfull\r\n\t\t\t\t\tcodigoactividadcompleto = this.secuenciaactividad.codigofull\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcodigoactividad = this.secuenciaactividad\r\n\t\t\t\t\tnombreactividad = this.itemactual.actividadtxt\r\n\t\t\t\t\tcodigoactividadcompleto = this.itemactual.codigofull\r\n                }\r\n                \r\n                if(typeof this.categoriagasto == 'object'){\r\n\t\t\t\t\tcodigocategoriagasto = this.categoriagasto.codigo\r\n\t\t\t\t\tnombrecategoriagasto = this.categoriagasto.nombre\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tcodigocategoriagasto = this.categoriagasto\r\n\t\t\t\t\tnombrecategoriagasto = this.itemactual.categoriagastotxt\r\n                }\r\n\r\n\t\t\t\tvar categorias = await planesadquisicionService.getActividadXPlanCategoria(this.planadquisicion,codigocategoriagasto)\r\n\r\n\t\t\t\tvar valida = this.validaGuardar(categorias)\r\n                var datbit = ''                \r\n\r\n                if(valida != ''){\r\n                    this.showMessage(true,3000,'error',valida)\r\n                    return\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//se arma el codigo del rubro\r\n\t\t\t\tvar codigorubro = ''\r\n\t\t\t\tvar codigofuente = ''\r\n\r\n\t\t\t\tif(this.fuefinpgn == '1' || this.fuefinpgn == 1){\r\n\r\n\t\t\t\t\tcodigofuente = '91'\r\n\r\n\t\t\t\t} else if(this.fuefinsgr == '1' || this.fuefinsgr == 1){\r\n\r\n\t\t\t\t\tcodigofuente = '50'\r\n\r\n\t\t\t\t} else if(this.fuefincofinanciado == '1' || this.fuefincofinanciado == 1){\r\n\r\n\t\t\t\t\tcodigofuente = '80'\r\n\r\n\t\t\t\t} else if(this.fuefinfuncionamiento == '1' || this.fuefinfuncionamiento == 1){\r\n\r\n\t\t\t\t\tcodigofuente = '30'\r\n\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar codigoproyecto = '000' + this.proyecto.toString()\r\n\t\t\t\tvar codigofincatgas = '00' + codigocategoriagasto.toString()\r\n\t\t\t\tvar codcoordinador = '00' + this.coordinador.toString()\r\n\t\t\t\t\r\n\t\t\t\tcodigoproyecto = codigoproyecto.substring(codigoproyecto.length - 3, codigoproyecto.length)\r\n\t\t\t\tcodigofincatgas = codigofincatgas.substring(codigofincatgas.length - 2, codigofincatgas.length)\r\n\t\t\t\tcodcoordinador = codcoordinador.substring(codcoordinador.length - 2, codcoordinador.length)\r\n\t\t\t\t\r\n\t\t\t\tcodigorubro = codigofuente.toString() + codigoproyecto.toString() + \r\n\t\t\t\t\t\t\t\tcodigoactividadcompleto.toString() + codcoordinador.toString() + \r\n\t\t\t\t\t\t\t\tcodigofincatgas.toString()\r\n\r\n                if(this.edit){\r\n\r\n                    if (this.itemactual.categoriagasto != codigocategoriagasto)\r\n                        datbit += 'Categoría del Gasto: ' + this.itemactual.categoriagastotxt.toUpperCase() + ' a ' + nombrecategoriagasto.toUpperCase()\t\t\t\t\t\t\t\t\t\t\t\r\n\r\n                    if (this.itemactual.valor != this.valor){\r\n\r\n                        if(datbit == '')\r\n                            datbit += 'Categoría del Gasto: ' + this.itemactual.categoriagastotxt.toUpperCase() + ' a ' + nombrecategoriagasto.toUpperCase()\r\n                        else\t\r\n\t\t\t\t\t\t\tdatbit += ', Categoría del Gasto: ' + this.itemactual.categoriagastotxt.toUpperCase() + ' a ' + nombrecategoriagasto.toUpperCase()                            \r\n                    }\r\n\r\n                    datbit = 'CODIGO: ' + this.codigo + ' (' + datbit + ')'\r\n\r\n                } else {\r\n\r\n\t\t\t\t\tdatbit += 'ACTIVIDAD: ' + nombrecategoriagasto.toUpperCase()\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar _this = this\r\n                this.loading = true\r\n\t\t\t\t\r\n\t\t\t\tlet valtope = 0\r\n\t\t\t\tvaltope = this.limpiarMoneda(this.topecategoriagasto)\r\n\r\n\t\t\t\tif(this.moneda.trim() == '$' && parseFloat(this.tasa) > 0 ){\r\n\t\t\t\t\t\r\n\t\t\t\t\tvaltope = parseFloat(valtope) / parseFloat(this.tasa)\r\n\r\n\t\t\t\t}\r\n\r\n                var data = {planadquisicion:this.planadquisicion,necesidad:this.necesidad,\r\n                                secuenciaactividad:codigoactividad,categoriagasto:codigocategoriagasto,\r\n                                topecategoriagasto:valtope,presupuesto:this.presupuesto,\r\n                                valor:this.limpiarMoneda(this.valor),rubro:codigorubro};\r\n\r\n                planesadquisicionService.addupdActividad(data)\r\n\t              .then(function(res) {\r\n\r\n\t              \t  if (res.response) {                           \r\n                            \r\n                          var error = res.response.data.message\r\n                          _this.showMessage(true,3000,'error',error)\r\n\r\n                      } else if(res.statusText){\r\n\t              \t  \t\t\r\n\t              \t  \t\tvar mensaje = ''\r\n                            var accbitacora = ''\r\n                            \r\n\t              \t  \t\tif(_this.edit){\r\n                                mensaje = 'Actualizó'\r\n                                accbitacora = 'ACTUALIZACION'\r\n                            } else {\r\n                                mensaje = 'Agregó'\r\n                                accbitacora = 'CREACION'\r\n                            }\r\n\r\n\t              \t  \t\t_this.showMessage(true,3000,'success','Se ' + mensaje + ' la Actividad con éxito')\r\n\r\n\t              \t  \t\t_this.del_item = ''\r\n\t              \t  \t\t_this.edit = -1\t              \t  \t\t\r\n\t              \t  \t\t_this.traerData()\r\n\t              \t  \t\t_this.resetForm()\r\n                            _this.dialog = false\r\n                                \r\n                            _this.agregaBitacora(accbitacora,datbit)\r\n\r\n\t              \t  }else{\t                                         \t\r\n\r\n\t                  \t\t_this.showMessage(true,3000,'error',res.message) \t                  \t\r\n\t                  }\r\n\r\n\t                    _this.loading = false\t                 \r\n\t                   \t\r\n\t          \t}).catch(function(err) {\r\n\r\n\t          \t\t_this.showMessage(true,3000,'error',err)\t    \r\n\t          \t\t_this.loading = false          \t\r\n\t          \t\t\r\n\t\t\t\t})\r\n            },\r\n            \r\n            agregaTope(itemcategoria){                \r\n                \r\n\t\t\t\tthis.tipotope = itemcategoria.tipotope\r\n\t\t\t\t//this.topecategoriagasto = this.formatearValor(itemcategoria.topemaximo,0)\r\n\r\n\t\t\t\tif(this.tipotope == 'M'){\r\n\r\n\t\t\t\t\tif(this.moneda.trim() == '$' && parseFloat(this.tasa) > 0){\r\n\r\n\t\t\t\t\t\tthis.topecategoriagasto = this.formatearValor(itemcategoria.topemaximo * this.tasa,0)\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tthis.topecategoriagasto = this.formatearValor(itemcategoria.topemaximo,0)\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n                this.nommoneda = ''\r\n                this.nomsufijo = ''\r\n\r\n                if(this.tipotope == 'M')\r\n                    this.nommoneda = this.moneda\r\n                else if(this.tipotope == 'P')    \r\n                    this.nomsufijo = '%'\t\r\n\r\n            },\r\n\r\n            number_format(amount, decimals) {\r\n\r\n\t\t\t\tamount += ''; // por si pasan un numero en vez de un string\r\n\t\t\t\tamount = parseFloat(amount.replace(/[^0-9\\.]/g, '')) // elimino cualquier cosa que no sea numero o punto\r\n\r\n\t\t\t\tdecimals = decimals || 0 // por si la variable no fue fue pasada\r\n\r\n\t\t\t\t// si no es un numero o es igual a cero retorno el mismo cero\r\n\t\t\t\tif (isNaN(amount) || amount === 0) \r\n\t\t\t\t\treturn parseFloat(0).toFixed(decimals)\r\n\r\n\t\t\t\t// si es mayor o menor que cero retorno el valor formateado como numero\r\n\t\t\t\tamount = '' + amount.toFixed(decimals)\r\n\r\n\t\t\t\tvar amount_parts = amount.split('.'),\r\n\t\t\t\t\tregexp = /(\\d+)(\\d{3})/\r\n\r\n\t\t\t\twhile (regexp.test(amount_parts[0]))\r\n\t\t\t\t\tamount_parts[0] = amount_parts[0].replace(regexp, '$1' + '.' + '$2')\r\n\r\n\t\t\t\treturn amount_parts.join(',')\r\n            },\r\n            \r\n            limpiarMoneda(val){\r\n\r\n\t\t\t\tvar nuevoval = val.toString().replace(',00','').replace(/[$.]/gi,'')\r\n\t\t\t\tnuevoval = nuevoval.replace(/[,]/gi,'.')\r\n\r\n\t\t\t\treturn nuevoval\t\t\t\t\r\n\t\t\t},\r\n\r\n\t\t\tformatearValor(value){\r\n\r\n\t\t\t\tlet valoractual = value\r\n\t\t\t\tvaloractual = this.limpiarMoneda(valoractual)\r\n\r\n\t\t\t\tvaloractual = this.number_format(valoractual,2)\r\n\r\n\t\t\t\treturn valoractual\r\n\t\t\t\t\r\n            },\r\n\r\n            formatearValorActividad(value){\r\n\r\n                this.valor = this.formatearValor(value) \r\n            },\r\n            \r\n            agregaBitacora(accion, detalle){              \r\n\r\n              var data = {modulo:this.modulo,accion:accion,detalle:detalle}\r\n              \r\n              this.$root.$emit('agregaBitacora', data)\r\n\r\n           }\r\n\t\t},\r\n\t\t\r\n    \twatch: {\r\n\t\t\tarrCatGasto: function(val){\r\n\r\n\t\t\t\t//this.presupuesto = 0\r\n\t\t\t\t//if(val.length > 0 )\r\n\t\t\t\t//\tthis.presupuesto = val[0].presupuesto\r\n\r\n\t\t\t},\r\n\r\n\t\t    edit: function (val) {\r\n\r\n\t\t       if(val)\r\n\t\t       {\r\n\t\t       \t\tthis.formTitle = 'Editar'\r\n                   \r\n                    this.secuenciaactividad = this.itemactual.secuenciaactividad\r\n                    this.categoriagasto = this.itemactual.categoriagasto\r\n\t\t\t\t\t//this.presupuesto = this.itemactual.presupuesto\r\n\t\t\t\t\t//this.topecategoriagasto = this.itemactual.topecategoriagasto != undefined ? \r\n\t\t\t\t\t//\t\t\t\t\t\t\tthis.formatearValor(this.itemactual.topecategoriagasto) : 0\r\n\t\t\t\t\tthis.valor = this.itemactual.valor != undefined ? \r\n\t\t\t\t\t\t\t\tthis.formatearValor(this.itemactual.valor) : 0\t\r\n                    \r\n                    for (let index = 0; index < this.arrCatGasto.length; index++) {\r\n                        const element = this.arrCatGasto[index]\r\n\r\n                        if(element.codigo == this.itemactual.categoriagasto){\r\n\r\n\t\t\t\t\t\t\tthis.tipotope = element.tipotope\r\n\t\t\t\t\t\t\tthis.topecategoriagasto = element.topemaximo != undefined ? \r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\telement.topemaximo : 0\r\n\r\n\t\t\t\t\t\t\tif(this.tipotope == 'M'){\r\n\r\n\t\t\t\t\t\t\t\tif(this.moneda.trim() == '$' && parseFloat(this.tasa) > 0){\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t\tthis.topecategoriagasto = this.formatearValor(this.topecategoriagasto * this.tasa)\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tthis.topecategoriagasto = this.formatearValor(this.topecategoriagasto)\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n                            break\r\n                        }                        \r\n                    }\r\n\r\n                    this.nommoneda = ''\r\n                    this.nomsufijo = ''\r\n\r\n                    if(this.tipotope == 'M')\r\n                        this.nommoneda = this.moneda\r\n                    else if(this.tipotope == 'P')    \r\n                        this.nomsufijo = '%'\t\r\n\r\n\t\t       } else{\r\n\r\n\t\t       \t\tthis.resetForm()\r\n\t\t       \t    this.formTitle = 'Nuevo'\r\n\t\t       }\r\n            },\r\n            \r\n            planadquisicion: function (val) {\r\n\r\n                if(val!=0){   \r\n                    \r\n                    this.traerData()   \r\n                    this.traerActividades()\r\n\t\t\t\t\tthis.traerCategoriaGasto()\r\n\t\t\t\t\tthis.traerPresupuestoConvenio()             \r\n\r\n                }\r\n            },\r\n\r\n            necesidad: function (val) {\r\n\r\n                if(val!=0){   \r\n                    \r\n                    this.traerData()   \r\n                    this.traerActividades()             \r\n\t\t\t\t\tthis.traerCategoriaGasto()\r\n\t\t\t\t\tthis.traerPresupuestoConvenio()\r\n\r\n                }\r\n            },\r\n\t\t},\r\n\t\tmounted() {\r\n\r\n            this.traerData()     \r\n            this.traerActividades()  \r\n\t\t\tthis.traerCategoriaGasto() \r\n\t\t\tthis.traerPresupuestoConvenio()    \r\n            this.agregaBitacora('INGRESO','INGRESO AL MODULO')\r\n\t\t},\t\r\n\t}\r\n\t\r\n</script>\r\n\r\n<style>\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CPlaAdqNecActividades.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CPlaAdqNecActividades.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CPlaAdqNecActividades.vue?vue&type=template&id=01ff6a92&\"\nimport script from \"./CPlaAdqNecActividades.vue?vue&type=script&lang=js&\"\nexport * from \"./CPlaAdqNecActividades.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}