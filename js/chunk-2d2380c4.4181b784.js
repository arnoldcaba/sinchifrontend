(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2380c4"],{fe5d:function(e,a,i){"use strict";i.r(a);var t=function(){var e=this,a=e.$createElement,i=e._self._c||a;return i("v-container",{attrs:{fluid:""}},[i("v-form",[i("v-card",{attrs:{color:"transparent"}},[i("v-card-title",[e._v("\n                Detalle Seguimiento\n            \n                "),i("v-spacer"),i("v-btn",{staticClass:"mx-2",attrs:{fab:"",dark:"",small:"",color:e.getColor(e.obssubdircientifica)},on:{click:function(a){e.dialog_vobosubdir=!0}}},[i("v-icon",{attrs:{dark:""}},[e._v("science")])],1)],1),i("v-card-text",[i("v-row",[i("v-col",{attrs:{sm12:""}},[i("b",[e._v("Actividad:")]),e._v(" "+e._s(e.txtactividad)+"\n                    ")])],1),i("v-row",[i("v-col",{attrs:{sm6:""}},[i("b",[e._v("Año:")]),e._v(" "+e._s(e.anno)+"\n                    ")]),i("v-col",{attrs:{sm6:""}},[i("b",[e._v("Mes:")]),e._v(" "+e._s(e.nombremes)+"\n                    ")])],1)],1)],1),i("v-card",[i("v-card-text",[i("v-row",[i("v-col",{attrs:{sm6:""}},[i("v-textarea",{attrs:{filled:"",name:"input-5-2",label:"Logros",readonly:e.soloLectura},model:{value:e.logros,callback:function(a){e.logros=a},expression:"logros"}})],1),i("v-col",{attrs:{sm6:""}},[i("v-textarea",{attrs:{filled:"",name:"input-5-2",label:"Necesidades",readonly:e.soloLectura},model:{value:e.necesidades,callback:function(a){e.necesidades=a},expression:"necesidades"}})],1)],1),i("v-row",[i("v-col",{attrs:{sm6:""}},[i("v-textarea",{attrs:{filled:"",name:"input-5-2",label:"Alertas",readonly:e.soloLectura},model:{value:e.alertas,callback:function(a){e.alertas=a},expression:"alertas"}})],1),i("v-col",{attrs:{sm6:""}},[i("v-textarea",{attrs:{filled:"",name:"input-5-2",label:"Ampliación de la información",readonly:e.soloLectura},model:{value:e.ampliacioninfo,callback:function(a){e.ampliacioninfo=a},expression:"ampliacioninfo"}})],1)],1),i("v-row",[i("v-col",{attrs:{sm12:""}},[i("span",[e._v("Archivo de Soporte")]),i("adjuntarArchivos",{attrs:{item:e.archivo,placeholder:"Seleccione el Archivo de Soporte",tipoarchivo:".pdf"}}),0==e.soloLectura?i("v-icon",{attrs:{color:"primary",disabled:""==e.archivo.file_name||""==e.codigo||"0"==e.codigo},on:{click:function(a){return e.abrirDialogoElimFile(e.archivo.file_name,"archivo")}}},[e._v("\n                            cancel\n                        ")]):e._e()],1)],1)],1),i("v-card-actions",[i("v-spacer"),0==e.soloLectura?i("v-btn",{attrs:{color:"primary",text:""},on:{click:e.saveitem}},[e._v("Actualizar Detalle")]):e._e()],1)],1)],1),i("v-dialog",{attrs:{width:"550"},model:{value:e.dialog_deletefile,callback:function(a){e.dialog_deletefile=a},expression:"dialog_deletefile"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline red--text"},[e._v("Eliminar Archivo")])]),i("v-card-text",[e._v("\n                    ¿Esta seguro de eliminar el Archivo "+e._s(e.filedelete)+" definitivamente?.\t\t\t\t\t\n                ")]),i("v-card-actions",[i("v-spacer"),i("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:function(a){e.dialog_deletefile=!1}}},[e._v("Cancelar")]),i("v-btn",{attrs:{color:"red",text:""},on:{click:e.eliminarArchivo}},[e._v("Eliminar")])],1)],1)],1),i("v-dialog",{attrs:{persistent:"","max-width":"800px"},model:{value:e.dialog_vobosubdir,callback:function(a){e.dialog_vobosubdir=a},expression:"dialog_vobosubdir"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[e._v("Observación SubDirección Científica")])]),i("v-card-text",[i("v-row",[i("v-textarea",{attrs:{filled:"",name:"input-7-4",label:"Observación",readonly:e.readvbsubdir},model:{value:e.obssubdircientifica,callback:function(a){e.obssubdircientifica=a},expression:"obssubdircientifica"}})],1)],1),i("v-card-actions",[i("v-spacer"),e.readvbsubdir?e._e():i("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:function(a){return e.actualizaObs("SC")}}},[e._v("Guardar")]),i("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:function(a){e.dialog_vobosubdir=!1}}},[e._v("Cancelar")])],1)],1)],1)],1)},o=[],r=i("a34a"),n=i.n(r),s=i("bc3a"),c=i.n(s),l=i("d89f"),d={getData:function(){return new Promise((function(e,a){c()({method:"POST",url:l["a"].apiUrl+"/ProyectosSegDet",dataType:"json"}).then((function(a){e(a)})).catch((function(a){e(a)}))}))},BuscarXItem:function(e,a,i){return new Promise((function(t,o){c()({method:"POST",url:l["a"].apiUrl+"/SegDetXItem",dataType:"json",data:{codigo:e,anno:a,mes:i}}).then((function(e){t(e)})).catch((function(e){t(e)}))}))},addupdData:function(e){return new Promise((function(a,i){c()({method:"POST",url:l["a"].apiUrl+"/addupdProyectoSegDet",dataType:"json",data:{data:e}}).then((function(e){a(e)})).catch((function(e){a(e)}))}))},uploadFile:function(e,a){return new Promise((function(i,t){c()({method:"POST",url:l["a"].apiUrl+"/addupdProyectoSegDet",dataType:"json",data:{codigo:e,anno:anno,mes:mes,file:a}}).then((function(e){i(e)})).catch((function(e){i(e)}))}))},deleteFile:function(e,a,i,t,o){return new Promise((function(r,n){c()({method:"POST",url:l["a"].apiUrl+"/deleteFileSegDet",dataType:"json",data:{codigo:e,anno:a,mes:i,ruta:t,archivo:o}}).then((function(e){r(e)})).catch((function(e){r(e)}))}))},obsSubDirCientifica:function(e,a,i,t){return new Promise((function(o,r){c()({method:"POST",url:l["a"].apiUrl+"/obsSubDirCientifica",dataType:"json",data:{codigo:e,anno:a,mes:i,obssubdircientifica:t}}).then((function(e){o(e)})).catch((function(e){o(e)}))}))}},u=d,v=i("3bb9"),h=(i("831b"),i("6181"));function f(e,a,i,t,o,r,n){try{var s=e[r](n),c=s.value}catch(l){return void i(l)}s.done?a(c):Promise.resolve(c).then(t,o)}function m(e){return function(){var a=this,i=arguments;return new Promise((function(t,o){var r=e.apply(a,i);function n(e){f(r,t,o,n,s,"next",e)}function s(e){f(r,t,o,n,s,"throw",e)}n(void 0)}))}}var b={name:"SeguimientoDet",props:["proyecto","codigo","txtactividad","anno","mes","readonly"],components:{adjuntarArchivos:function(){return i.e("chunk-2d2245ed").then(i.bind(null,"e09e"))}},data:function(){return{loading:!1,convenioproyecto:"",nombreproyecto:"",codigocoordinador:"",logros:"",necesidades:"",alertas:"",ampliacioninfo:"",archivo:{file_name:"",file_path:"",file_name_tmp:""},nombremes:"",rutasarchivogen:"",filedelete:"",tipofiledelete:"",dialog_deletefile:"",obssubdircientifica:"",dialog_vobosubdir:!1,readvbsubdir:!0,usuarioDirCientifica:"",usuarioPlaneacion:"",usuaactual:"",soloLectura:!1}},methods:{devolverMes:function(){var e="";switch(this.mes){case 1:e="ENERO";break;case 2:e="FEBRERO";break;case 3:e="MARZO";break;case 4:e="ABRIL";break;case 5:e="MAYO";break;case 6:e="JUNIO";break;case 7:e="JULIO";break;case 8:e="AGOSTO";break;case 9:e="SEPTIEMBRE";break;case 10:e="OCTUBRE";break;case 11:e="NOVIEMBRE";break;case 12:e="DICIEMBRE";break;default:break}this.nombremes=e},showMessage:function(e,a,i,t){this.$root.$emit("showSnack",{snack:e,time:a,color:i,text:t})},envioNotificaciones:function(e,a,i){this.$emit("envioNotificaciones",{mensajenotificacion:e,asuntocorreo:a,mensajecorreo:i})},envionotificacionesUsuarios:function(e){var a=0,i=16,t=this.convenioproyecto;""!=this.usuarioDirCientifica&&"0"!=this.usuarioDirCientifica&&(a=this.usuarioDirCientifica,this.$root.$emit("enviarNotificaciones",{codigopersona:a,mensajenotificacion:e.mensajenotificacion,asuntocorreo:e.asuntocorreo,mensajecorreo:e.mensajecorreo,codigoopcion:i,numerointerno:t}))},traerDataProyecto:function(){var e=this;e.convenioproyecto="",e.nombreproyecto="",e.codigocoordinador="",v["a"].getDataXId(this.proyecto).then((function(a){a.request&&a.data&&(e.convenioproyecto=a.data.data[0].convenio,e.nombreproyecto=a.data.data[0].nombre,e.codigocoordinador=a.data.data[0].codigocoordinador)})).catch((function(e){}))},traerData:function(){var e=this;this.loading=!0,this.logros="",this.necesidades="",this.alertas="",this.ampliacioninfo="",this.archivo={file_name:"",file_path:"",file_name_tmp:""},this.rutasarchivogen="",u.BuscarXItem(this.codigo,this.anno,this.mes).then((function(a){if(a.request&&a.data){e.dataseg=a.data.data,console.log(e.dataseg),e.logros=e.dataseg[0].logros,e.necesidades=e.dataseg[0].necesidades,e.alertas=e.dataseg[0].alertas,e.ampliacioninfo=e.dataseg[0].ampliacioninfo,e.obssubdircientifica=null==e.dataseg[0].obssubdircientifica?"":e.dataseg[0].obssubdircientifica,e.rutasarchivogen=e.dataseg[0].rutasarchivogen;var i=e.dataseg[0].archivo;e.archivo={file_name:i,file_path:""!=i?e.rutasarchivogen:"",file_name_tmp:""},e.traerDataActividades(e.actividad.secuencia)}e.loading=!1})).catch((function(a){e.loading=!1}))},saveitem:function(){this.loading=!0;var e=this,a={codigo:this.codigo,anno:this.anno,mes:this.mes,logros:this.logros,necesidades:this.necesidades,alertas:this.alertas,ampliacioninfo:this.ampliacioninfo,archivo:this.archivo};u.addupdData(a).then((function(a){if(a.response){var i=a.response.data.message;e.showMessage(!0,7e3,"error",i)}else if(a.statusText){e.showMessage(!0,3e3,"success","Se Actualizó el Detalle del Seguimiento para la Actividad del Proyecto"),e.traerData(),e.agregaBitacora("ACTUALIZACION","SE ACTUALIZO EL DETALLE DEL SEGUIMIENTO DE LA ACTIVIDAD "+e.txtactividad+", PARA EL AÑO "+e.anno+"Y MES "+e.mes+" DEL PROYECTO CON # DE CONVENIO: "+e.convenioproyecto+" Y NOMBRE: "+e.nombreproyecto);var t="Cordial Saludo,<br><br> Se Actualizó el detalle del seguimiento de la actividad '"+e.txtactividad+"' para el año '"+e.anno+"' y mes '"+e.mes+"' del Proyecto con # de Convenio "+e.convenioproyecto+", Nombre: "+e.nombreproyecto+"<br><br>Agradeciendo su atención,<br><br> <b>SINCHI</b><br><br> <i>Este es un servicio de notificaciones generado automáticamente por medio de correo electrónico, no lo responda.</i> <br>",o="Se Actualizó el detalle del seguimiento de la actividad '"+e.txtactividad+"' para el año '"+e.anno+"' y mes '"+e.mes+"' del Proyecto con # de Convenio "+e.convenioproyecto+", Nombre: "+e.nombreproyecto;e.envioNotificaciones(o,"Actualización Detalle de Seguimiento de una Actividad de un Proyecto",t),e.envionotificacionesUsuarios({mensajenotificacion:o,asuntocorreo:"Actualización Detalle de Seguimiento de una Actividad de un Proyecto",mensajecorreo:t})}else e.showMessage(!0,3e3,"error",a.message);e.loading=!1})).catch((function(a){e.showMessage(!0,3e3,"error",a),e.loading=!1}))},abrirDialogoElimFile:function(e,a){this.filedelete=e,this.tipofiledelete=a,this.dialog_deletefile=!0},eliminarArchivo:function(){var e=m(n.a.mark((function e(){var a,i;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a="proyectos\\S"+this.codigo.toString()+this.anno.toString()+this.mes.toString()+"\\",e.next=3,u.deleteFile(this.codigo,this.anno,this.mes,a,this.filedelete);case 3:if(i=e.sent,!i.data){e.next=22;break}if("error"!=i.data.tipo){e.next=9;break}this.showMessage(!0,4e3,"error",i.data.respuesta),e.next=20;break;case 9:if("success"!=i.data.tipo){e.next=19;break}e.t0=this.tipofiledelete,e.next="archivo"===e.t0?13:15;break;case 13:return this.archivo={file_name:"",file_path:"",file_name_tmp:""},e.abrupt("break",16);case 15:return e.abrupt("break",16);case 16:this.showMessage(!0,4e3,"success",i.data.respuesta),e.next=20;break;case 19:this.showMessage(!0,4e3,"error","Se presentó un error al intentar realizar la operación");case 20:e.next=23;break;case 22:this.showMessage(!0,4e3,"error","Se presentó un error al intentar realizar la operación");case 23:this.dialog_deletefile=!1;case 24:case"end":return e.stop()}}),e,this)})));function a(){return e.apply(this,arguments)}return a}(),getColor:function(e){return""==e?"grey":"blue"},traeUsuarios:function(){var e=m(n.a.mark((function e(){var a,i;return n.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.usuarioDirCientifica=0,this.usuarioPlaneacion=0,e.prev=2,e.next=5,h["a"].getUserXArea(3);case 5:return a=e.sent,e.next=8,h["a"].getUserXArea(4);case 8:i=e.sent,a.data&&(this.usuarioDirCientifica=a.data.data[0].userid),i.data&&(this.usuarioPlaneacion=i.data.data[0].userid),this.usuaactual=this.$session.get("usuarioid"),this.readvbsubdir=!0,this.soloLectura=!1,this.usuaactual==this.usuarioDirCientifica&&(this.readvbsubdir=!1,this.soloLectura=!0),this.usuaactual==this.usuarioPlaneacion&&(this.soloLectura=!0),e.next=20;break;case 18:e.prev=18,e.t0=e["catch"](2);case 20:return e.prev=20,e.finish(20);case 22:case"end":return e.stop()}}),e,this,[[2,18,20,22]])})));function a(){return e.apply(this,arguments)}return a}(),actualizaObs:function(e){var a="",i="",t="";if("SC"==e&&(a="DE SUBDIRECCIÓN CIENTÍFICA",i=this.obssubdircientifica),""!=i){t="Observación "+a+", Observación: "+i+")";var o=this;console.log(this.codigo,this.anno,this.mes,i),u.obsSubDirCientifica(this.codigo,this.anno,this.mes,i).then((function(e){if(e.response){var i=e.response.data.message;o.showMessage(!0,3e3,"error",i)}else if(e.statusText){o.showMessage(!0,3e3,"success","Se actualizó la observación "+a+" con éxito"),o.agregaBitacora("OBSERVACIÓN "+a,t);var r="Cordial Saludo,<br><br> Se Actualizó la Observación "+a+" del seguimiento de la actividad '"+o.txtactividad+"' para el año '"+o.anno+"' y mes '"+o.mes+"' del Proyecto con # de Convenio "+o.convenioproyecto+", Nombre: "+o.nombreproyecto+"<br><br>Agradeciendo su atención,<br><br> <b>SINCHI</b><br><br> <i>Este es un servicio de notificaciones generado automáticamente por medio de correo electrónico, no lo responda.</i> <br>",n="Se Actualizó la Observación "+a+" del seguimiento de la actividad "+o.txtactividad+" para el año "+o.anno+" y mes "+o.mes+" del Proyecto con # de Convenio "+o.convenioproyecto+", Nombre: "+o.nombreproyecto;o.envioNotificaciones(n,"Actualización de Observación de un Seguimiento de una Actividad",r),o.dialog_vobosubdir=!1}else o.showMessage(!0,3e3,"error",e.message)})).catch((function(e){o.showMessage(!0,3e3,"error",e)}))}else this.showMessage(!0,4e3,"error","Debe ingresar la Observación")},agregaBitacora:function(e,a){var i={modulo:"SEGUIMIENTO PLAN DE ACCION PROYECTOS",accion:e,detalle:a};this.$root.$emit("agregaBitacora",i)}},watch:{proyecto:function(e){0!=e&&this.traerDataProyecto()},codigo:function(e){0!=e&&this.traerData()},anno:function(e){0!=e&&this.traerData()},mes:function(e){0!=e&&(this.devolverMes(),this.traerData())}},mounted:function(){this.traerDataProyecto(),this.traerData(),this.devolverMes(),this.traeUsuarios()}},p=b,g=i("2877"),y=Object(g["a"])(p,t,o,!1,null,null,null);a["default"]=y.exports}}]);
//# sourceMappingURL=chunk-2d2380c4.4181b784.js.map